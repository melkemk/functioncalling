2025-05-29 03:09:38,065 - INFO -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/app/__init__.py', reloading
2025-05-29 03:09:38,478 - INFO -  * Restarting with stat
2025-05-29 03:09:40,400 - INFO - Database tables created successfully
2025-05-29 03:09:40,411 - WARNING -  * Debugger is active!
2025-05-29 03:09:40,414 - INFO -  * Debugger PIN: 884-461-352
2025-05-29 03:10:05,018 - INFO - 127.0.0.1 - - [29/May/2025 03:10:05] "[33mPOST /chat HTTP/1.1[0m" 404 -
2025-05-29 03:10:16,794 - INFO -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/run.py', reloading
2025-05-29 03:10:16,952 - INFO -  * Restarting with stat
2025-05-29 03:10:18,583 - INFO - Database tables created successfully
2025-05-29 03:10:18,611 - WARNING -  * Debugger is active!
2025-05-29 03:10:18,616 - INFO -  * Debugger PIN: 884-461-352
2025-05-29 03:11:24,519 - INFO - Database tables created successfully
2025-05-29 03:11:24,535 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-05-29 03:11:24,535 - INFO - [33mPress CTRL+C to quit[0m
2025-05-29 03:11:24,536 - INFO -  * Restarting with stat
2025-05-29 03:11:25,869 - INFO - Database tables created successfully
2025-05-29 03:11:25,881 - WARNING -  * Debugger is active!
2025-05-29 03:11:25,883 - INFO -  * Debugger PIN: 884-461-352
2025-05-29 03:11:30,142 - INFO - 127.0.0.1 - - [29/May/2025 03:11:30] "GET / HTTP/1.1" 200 -
2025-05-29 03:11:40,308 - INFO -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/app.py', reloading
2025-05-29 03:11:40,784 - INFO -  * Restarting with stat
2025-05-29 03:11:45,768 - INFO - Database tables created successfully
2025-05-29 03:11:45,785 - WARNING -  * Debugger is active!
2025-05-29 03:11:45,790 - INFO -  * Debugger PIN: 884-461-352
2025-05-29 03:11:57,826 - INFO - 127.0.0.1 - - [29/May/2025 03:11:57] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 03:12:00,443 - INFO - 127.0.0.1 - - [29/May/2025 03:12:00] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 03:12:03,059 - INFO - 127.0.0.1 - - [29/May/2025 03:12:03] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 03:12:06,569 - INFO - 127.0.0.1 - - [29/May/2025 03:12:06] "[35m[1mPOST /api/transaction HTTP/1.1[0m" 201 -
2025-05-29 03:12:08,942 - INFO - 127.0.0.1 - - [29/May/2025 03:12:08] "[35m[1mPOST /api/transaction HTTP/1.1[0m" 201 -
2025-05-29 03:12:11,446 - INFO - 127.0.0.1 - - [29/May/2025 03:12:11] "GET /api/transaction/summary?user_id=1&year=2024&month=3&currency=USD HTTP/1.1" 200 -
2025-05-29 03:12:13,231 - INFO - 127.0.0.1 - - [29/May/2025 03:12:13] "GET /api/chat/history?user_id=1 HTTP/1.1" 200 -
2025-05-29 03:12:19,185 - INFO - 127.0.0.1 - - [29/May/2025 03:12:19] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 03:12:21,640 - INFO - 127.0.0.1 - - [29/May/2025 03:12:21] "[35m[1mPOST /api/transaction HTTP/1.1[0m" 201 -
2025-05-29 03:12:23,844 - INFO - 127.0.0.1 - - [29/May/2025 03:12:23] "GET /api/transaction/breakdown?user_id=1&start_date=2024-03-01&end_date=2024-03-31 HTTP/1.1" 200 -
2025-05-29 03:12:30,666 - INFO - 127.0.0.1 - - [29/May/2025 03:12:30] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 03:13:04,869 - INFO -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/handleapi.py', reloading
2025-05-29 03:13:07,118 - INFO -  * Restarting with stat
2025-05-29 03:13:09,290 - INFO - Database tables created successfully
2025-05-29 03:13:09,315 - WARNING -  * Debugger is active!
2025-05-29 03:13:09,319 - INFO -  * Debugger PIN: 884-461-352
2025-05-29 03:13:34,664 - INFO -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/app.py', reloading
2025-05-29 03:13:34,851 - INFO -  * Restarting with stat
2025-05-29 03:13:36,531 - INFO - Database tables created successfully
2025-05-29 03:13:36,547 - WARNING -  * Debugger is active!
2025-05-29 03:13:36,552 - INFO -  * Debugger PIN: 884-461-352
2025-05-29 03:13:37,595 - INFO -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/app.py', reloading
2025-05-29 03:13:37,815 - INFO -  * Restarting with stat
2025-05-29 03:13:40,177 - INFO - Database tables created successfully
2025-05-29 03:13:40,235 - WARNING -  * Debugger is active!
2025-05-29 03:13:40,243 - INFO -  * Debugger PIN: 884-461-352
2025-05-29 03:15:24,061 - INFO - 127.0.0.1 - - [29/May/2025 03:15:24] "GET /api/chat/history?user_id=1 HTTP/1.1" 200 -
2025-05-29 03:15:31,202 - INFO - 127.0.0.1 - - [29/May/2025 03:15:31] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-05-29 03:16:54,437 - INFO - 127.0.0.1 - - [29/May/2025 03:16:54] "OPTIONS /api/transaction/summary?user_id=1&year=2025&month=5Â¤cy=USD HTTP/1.1" 200 -
2025-05-29 03:16:54,441 - INFO - 127.0.0.1 - - [29/May/2025 03:16:54] "OPTIONS /api/transaction/breakdown?user_id=1&start_date=2025-05-01&end_date=2025-05-31 HTTP/1.1" 200 -
2025-05-29 03:16:54,444 - INFO - 127.0.0.1 - - [29/May/2025 03:16:54] "OPTIONS /api/chat/history?user_id=1 HTTP/1.1" 200 -
2025-05-29 03:16:54,641 - INFO - 127.0.0.1 - - [29/May/2025 03:16:54] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-05-29 03:18:14,062 - INFO - 127.0.0.1 - - [29/May/2025 03:18:14] "OPTIONS /api/transaction/summary?user_id=1&year=2025&month=5Â¤cy=USD HTTP/1.1" 200 -
2025-05-29 03:18:14,083 - INFO - 127.0.0.1 - - [29/May/2025 03:18:14] "OPTIONS /api/transaction/breakdown?user_id=1&start_date=2025-05-01&end_date=2025-05-31 HTTP/1.1" 200 -
2025-05-29 03:18:14,086 - INFO - 127.0.0.1 - - [29/May/2025 03:18:14] "OPTIONS /api/chat/history?user_id=1 HTTP/1.1" 200 -
2025-05-29 03:18:37,308 - INFO - 127.0.0.1 - - [29/May/2025 03:18:37] "GET /api/chat/history?user_id=1 HTTP/1.1" 200 -
2025-05-29 03:18:50,408 - INFO - 127.0.0.1 - - [29/May/2025 03:18:50] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-05-29 03:19:23,186 - INFO -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/app.py', reloading
2025-05-29 03:19:23,420 - INFO -  * Restarting with stat
2025-05-29 03:19:24,201 - INFO - Database tables created successfully
2025-05-29 03:19:24,208 - WARNING -  * Debugger is active!
2025-05-29 03:19:24,210 - INFO -  * Debugger PIN: 884-461-352
2025-05-29 03:19:34,306 - INFO -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/app.py', reloading
2025-05-29 03:19:34,510 - INFO -  * Restarting with stat
2025-05-29 03:19:36,980 - INFO - Database tables created successfully
2025-05-29 03:19:36,999 - WARNING -  * Debugger is active!
2025-05-29 03:19:37,003 - INFO -  * Debugger PIN: 884-461-352
2025-05-29 03:20:14,877 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://192.168.0.8:5001
2025-05-29 03:20:14,877 - INFO - [33mPress CTRL+C to quit[0m
2025-05-29 03:20:14,879 - INFO -  * Restarting with stat
2025-05-29 03:20:16,397 - WARNING -  * Debugger is active!
2025-05-29 03:20:16,401 - INFO -  * Debugger PIN: 703-508-425
2025-05-29 03:20:37,489 - INFO - 127.0.0.1 - - [29/May/2025 03:20:37] "[33mOPTIONS /api/chat HTTP/1.1[0m" 404 -
2025-05-29 03:21:19,232 - INFO - 127.0.0.1 - - [29/May/2025 03:21:19] "OPTIONS /api/transaction/summary?user_id=1&year=2025&month=5Â¤cy=USD HTTP/1.1" 200 -
2025-05-29 03:21:19,273 - INFO - 127.0.0.1 - - [29/May/2025 03:21:19] "OPTIONS /api/transaction/breakdown?user_id=1&start_date=2025-05-01&end_date=2025-05-31 HTTP/1.1" 200 -
2025-05-29 03:21:19,295 - INFO - 127.0.0.1 - - [29/May/2025 03:21:19] "OPTIONS /api/chat/history?user_id=1 HTTP/1.1" 200 -
2025-05-29 03:21:52,999 - INFO - 127.0.0.1 - - [29/May/2025 03:21:52] "GET / HTTP/1.1" 200 -
2025-05-29 03:21:54,080 - INFO - 127.0.0.1 - - [29/May/2025 03:21:54] "[33mOPTIONS /api/transaction/summary?user_id=1&year=2025&month=5Â¤cy=USD HTTP/1.1[0m" 404 -
2025-05-29 03:21:54,117 - INFO - 127.0.0.1 - - [29/May/2025 03:21:54] "[33mOPTIONS /api/transaction/breakdown?user_id=1&start_date=2025-05-01&end_date=2025-05-31 HTTP/1.1[0m" 404 -
2025-05-29 03:21:54,126 - INFO - 127.0.0.1 - - [29/May/2025 03:21:54] "[33mOPTIONS /api/chat/history?user_id=1 HTTP/1.1[0m" 404 -
2025-05-29 03:22:28,392 - INFO - 127.0.0.1 - - [29/May/2025 03:22:28] "GET /chat-page HTTP/1.1" 200 -
2025-05-29 03:22:29,534 - INFO - 127.0.0.1 - - [29/May/2025 03:22:29] "GET /chat-history HTTP/1.1" 200 -
2025-05-29 03:22:37,430 - INFO - User 1 query to Gemini: Generate a report for this month
2025-05-29 03:22:39,866 - INFO - Final AI response to user: To generate a report for this month, I need to know the start and end dates.  What is the first day of this month and the last day of this month?

2025-05-29 03:22:42,118 - INFO - 127.0.0.1 - - [29/May/2025 03:22:42] "POST /chat HTTP/1.1" 200 -
2025-05-29 03:23:01,162 - INFO - User 1 query to Gemini: What time is it now?
2025-05-29 03:23:02,194 - INFO - Gemini requested function call: get_current_datetime with args: {}
2025-05-29 03:23:02,194 - INFO - Function get_current_datetime raw result: {'date': '2025-05-29', 'time': '03:23', 'day_name': 'Thursday', 'timezone': 'Local'}
2025-05-29 03:23:02,194 - INFO - Sending tool responses back to Gemini: [{'function_response': {'name': 'get_current_datetime', 'response': {'result': {'date': '2025-05-29', 'time': '03:23', 'day_name': 'Thursday', 'timezone': 'Local'}}}}]
2025-05-29 03:23:03,250 - INFO - Final AI response to user: The current time is 03:23 on Thursday, May 29th, 2025.

2025-05-29 03:23:04,528 - INFO - 127.0.0.1 - - [29/May/2025 03:23:04] "POST /chat HTTP/1.1" 200 -
2025-05-29 03:23:14,209 - INFO - User 1 query to Gemini: exchange rate between usd and eth
2025-05-29 03:23:15,609 - INFO - Final AI response to user: I cannot fulfill this request. The available tools do not have functionalities for cryptocurrencies like ETH.

2025-05-29 03:23:16,478 - INFO - 127.0.0.1 - - [29/May/2025 03:23:16] "POST /chat HTTP/1.1" 200 -
2025-05-29 03:23:27,750 - INFO - User 1 query to Gemini: exchange rate between usd and ethipia
2025-05-29 03:23:29,128 - INFO - Final AI response to user: I need the current exchange rate for USD to which Ethiopian currency?  While the most common currency in Ethiopia is the Birr (ETB), there could be others. Please specify the currency you'd like to convert to.

2025-05-29 03:23:29,872 - INFO - 127.0.0.1 - - [29/May/2025 03:23:29] "POST /chat HTTP/1.1" 200 -
2025-05-29 03:23:39,185 - INFO - User 1 query to Gemini: ETB
2025-05-29 03:23:40,808 - INFO - Final AI response to user: I need more information to understand what you'd like to do with ETB.  Are you interested in the exchange rate, adding a transaction in ETB, or something else?

2025-05-29 03:23:41,928 - INFO - 127.0.0.1 - - [29/May/2025 03:23:41] "POST /chat HTTP/1.1" 200 -
2025-05-29 03:23:50,074 - INFO - User 1 query to Gemini: ETB to usd currency convertion
2025-05-29 03:23:51,346 - INFO - Final AI response to user: How much ETB do you want to convert?

2025-05-29 03:23:55,602 - INFO - 127.0.0.1 - - [29/May/2025 03:23:55] "POST /chat HTTP/1.1" 200 -
2025-05-29 03:24:06,238 - INFO - User 1 query to Gemini: exchange rate between usd and ethipia etb
2025-05-29 03:24:07,244 - INFO - Gemini requested function call: get_exchange_rate with args: {'to_currency': 'ETB', 'from_currency': 'USD'}
2025-05-29 03:24:07,739 - INFO - Function get_exchange_rate raw result: 135.1047
2025-05-29 03:24:07,739 - INFO - Sending tool responses back to Gemini: [{'function_response': {'name': 'get_exchange_rate', 'response': {'result': 135.1047}}}]
2025-05-29 03:24:08,816 - INFO - Final AI response to user: The current exchange rate is 1 USD to 135.10 ETB.

2025-05-29 03:24:10,335 - INFO - 127.0.0.1 - - [29/May/2025 03:24:10] "POST /chat HTTP/1.1" 200 -
2025-05-29 03:24:22,111 - INFO - User 1 query to Gemini: Hello, add income 33333 usd as salary category salary and descriopiton salary
2025-05-29 03:24:23,511 - INFO - Final AI response to user: Hello!  I'm ready to help.

To add your transaction, I need a bit more information.  Please specify the date and time of this income.

2025-05-29 03:24:23,766 - INFO - 127.0.0.1 - - [29/May/2025 03:24:23] "POST /chat HTTP/1.1" 200 -
2025-05-29 03:24:32,806 - INFO - User 1 query to Gemini: Hello, add income 3434 usd as salary category salary and descriopiton salary date today time now
2025-05-29 03:24:34,266 - INFO - Gemini requested function call: add_transaction with args: {'amount': 3434.0, 'description': 'salary', 'type': 'income', 'currency': 'USD', 'category': 'salary'}
2025-05-29 03:24:35,237 - INFO - Function add_transaction raw result: Income of 3434.0 USD for 'salary' added successfully at 2025-05-29 03:24.
2025-05-29 03:24:35,238 - INFO - Sending tool responses back to Gemini: [{'function_response': {'name': 'add_transaction', 'response': {'result': "Income of 3434.0 USD for 'salary' added successfully at 2025-05-29 03:24."}}}]
2025-05-29 03:24:36,733 - INFO - Final AI response to user: OK. Income of 3434.0 USD for 'salary' added successfully at 2025-05-29 03:24.

2025-05-29 03:24:37,528 - INFO - 127.0.0.1 - - [29/May/2025 03:24:37] "POST /chat HTTP/1.1" 200 -
2025-05-29 03:24:45,812 - INFO - 127.0.0.1 - - [29/May/2025 03:24:45] "GET / HTTP/1.1" 200 -
2025-05-29 03:25:04,460 - INFO - 127.0.0.1 - - [29/May/2025 03:25:04] "GET /chat-page HTTP/1.1" 200 -
2025-05-29 03:25:04,810 - INFO - 127.0.0.1 - - [29/May/2025 03:25:04] "GET /chat-history HTTP/1.1" 200 -
2025-05-29 03:25:13,431 - INFO - User 1 query to Gemini: Hello, add income 66666 usd as salary category salary and descriopiton salary date today time now
2025-05-29 03:25:14,512 - INFO - Gemini requested function call: add_transaction with args: {'currency': 'USD', 'description': 'salary', 'type': 'income', 'amount': 66666.0, 'category': 'salary'}
2025-05-29 03:25:15,924 - INFO - Function add_transaction raw result: Income of 66666.0 USD for 'salary' added successfully at 2025-05-29 03:25.
2025-05-29 03:25:15,924 - INFO - Sending tool responses back to Gemini: [{'function_response': {'name': 'add_transaction', 'response': {'result': "Income of 66666.0 USD for 'salary' added successfully at 2025-05-29 03:25."}}}]
2025-05-29 03:25:17,277 - INFO - Final AI response to user: I have added an income transaction of 66666.0 USD for 'salary' with the description 'salary'.  The transaction was recorded for today, May 29th, 2025, at 3:25 AM.

2025-05-29 03:25:18,696 - INFO - 127.0.0.1 - - [29/May/2025 03:25:18] "POST /chat HTTP/1.1" 200 -
2025-05-29 03:25:25,471 - INFO - 127.0.0.1 - - [29/May/2025 03:25:25] "GET / HTTP/1.1" 200 -
2025-05-29 03:25:31,125 - INFO - 127.0.0.1 - - [29/May/2025 03:25:31] "GET /chat-page HTTP/1.1" 200 -
2025-05-29 03:25:32,555 - INFO - 127.0.0.1 - - [29/May/2025 03:25:32] "GET /chat-history HTTP/1.1" 200 -
2025-05-29 03:25:41,065 - INFO - User 1 query to Gemini: generate financial report
2025-05-29 03:25:42,111 - INFO - Gemini requested function call: generate_pdf_report with args: {}
2025-05-29 03:25:42,115 - INFO - Starting PDF generation for user 1 with filename: financial_report_demouser_20250529032542.pdf
2025-05-29 03:25:42,117 - INFO - Fetching financial data for period 1900-01-01 to 2025-05-29
2025-05-29 03:25:42,677 - INFO - Found 10 recent transactions for user 1
2025-05-29 03:25:42,848 - INFO - Successfully generated PDF report: financial_report_demouser_20250529032542.pdf
2025-05-29 03:25:42,849 - INFO - Function generate_pdf_report raw result: financial_report_demouser_20250529032542.pdf
2025-05-29 03:25:42,849 - INFO - Sending tool responses back to Gemini: [{'function_response': {'name': 'generate_pdf_report', 'response': {'result': 'PDF report generated successfully: financial_report_demouser_20250529032542.pdf.'}}}]
2025-05-29 03:25:43,802 - INFO - Final AI response to user: I've generated the PDF report summarizing your finances. A download link is available.

2025-05-29 03:25:45,078 - INFO - 127.0.0.1 - - [29/May/2025 03:25:45] "POST /chat HTTP/1.1" 200 -
2025-05-29 03:26:22,910 - INFO -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/app.py', reloading
2025-05-29 03:26:22,942 - INFO -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/app.py', reloading
2025-05-29 03:26:23,305 - INFO -  * Restarting with stat
2025-05-29 03:26:25,227 - INFO -  * Restarting with stat
2025-05-29 03:26:25,249 - INFO - Database tables created successfully
2025-05-29 03:26:25,263 - WARNING -  * Debugger is active!
2025-05-29 03:26:25,266 - INFO -  * Debugger PIN: 884-461-352
2025-05-29 03:26:26,820 - WARNING -  * Debugger is active!
2025-05-29 03:26:26,824 - INFO -  * Debugger PIN: 703-508-425
2025-05-29 03:26:37,418 - INFO -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/app.py', reloading
2025-05-29 03:26:37,604 - INFO -  * Restarting with stat
2025-05-29 03:26:37,983 - INFO -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/app.py', reloading
2025-05-29 03:26:38,205 - INFO -  * Restarting with stat
2025-05-29 03:26:39,808 - INFO - Database tables created successfully
2025-05-29 03:26:39,823 - WARNING -  * Debugger is active!
2025-05-29 03:26:39,826 - INFO -  * Debugger PIN: 884-461-352
2025-05-29 03:26:40,507 - WARNING -  * Debugger is active!
2025-05-29 03:26:40,511 - INFO -  * Debugger PIN: 703-508-425
2025-05-29 03:27:04,054 - INFO -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/app.py', reloading
2025-05-29 03:27:04,196 - INFO -  * Restarting with stat
2025-05-29 03:27:04,807 - INFO -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/app.py', reloading
2025-05-29 03:27:04,996 - INFO -  * Restarting with stat
2025-05-29 03:27:05,178 - INFO - Database tables created successfully
2025-05-29 03:27:05,189 - WARNING -  * Debugger is active!
2025-05-29 03:27:05,192 - INFO -  * Debugger PIN: 884-461-352
2025-05-29 03:27:05,975 - WARNING -  * Debugger is active!
2025-05-29 03:27:05,978 - INFO -  * Debugger PIN: 703-508-425
2025-05-29 07:56:15,380 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://192.168.0.8:5001
2025-05-29 07:56:15,385 - INFO - [33mPress CTRL+C to quit[0m
2025-05-29 07:56:15,388 - INFO -  * Restarting with stat
2025-05-29 07:56:17,143 - WARNING -  * Debugger is active!
2025-05-29 07:56:30,916 - INFO -  * Debugger PIN: 119-895-824
2025-05-29 07:56:44,383 - INFO - 127.0.0.1 - - [29/May/2025 07:56:44] "GET / HTTP/1.1" 200 -
2025-05-29 07:56:50,958 - INFO - 127.0.0.1 - - [29/May/2025 07:56:50] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-05-29 07:57:20,002 - INFO - 127.0.0.1 - - [29/May/2025 07:57:20] "GET /chat-page HTTP/1.1" 200 -
2025-05-29 07:57:20,580 - INFO - 127.0.0.1 - - [29/May/2025 07:57:20] "GET /chat-history HTTP/1.1" 200 -
2025-05-29 07:57:33,402 - INFO - 127.0.0.1 - - [29/May/2025 07:57:33] "GET / HTTP/1.1" 200 -
2025-05-29 07:58:39,567 - INFO -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/run.py', reloading
2025-05-29 07:58:41,041 - INFO -  * Restarting with stat
2025-05-29 07:58:42,434 - WARNING -  * Debugger is active!
2025-05-29 07:58:42,438 - INFO -  * Debugger PIN: 119-895-824
2025-05-29 07:58:57,677 - INFO -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/app/__init__.py', reloading
2025-05-29 07:58:57,929 - INFO -  * Restarting with stat
2025-05-29 07:58:59,362 - WARNING -  * Debugger is active!
2025-05-29 07:58:59,364 - INFO -  * Debugger PIN: 119-895-824
2025-05-29 07:59:11,521 - INFO -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/app/models/models.py', reloading
2025-05-29 07:59:11,735 - INFO -  * Restarting with stat
2025-05-29 07:59:12,954 - WARNING -  * Debugger is active!
2025-05-29 07:59:12,957 - INFO -  * Debugger PIN: 119-895-824
2025-05-29 07:59:35,206 - INFO -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/app/services/exchange_service.py', reloading
2025-05-29 07:59:35,388 - INFO -  * Restarting with stat
2025-05-29 07:59:36,262 - WARNING -  * Debugger is active!
2025-05-29 07:59:36,265 - INFO -  * Debugger PIN: 119-895-824
2025-05-29 07:59:58,200 - INFO -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/app/services/datetime_service.py', reloading
2025-05-29 07:59:58,359 - INFO -  * Restarting with stat
2025-05-29 07:59:59,583 - WARNING -  * Debugger is active!
2025-05-29 07:59:59,743 - INFO -  * Debugger PIN: 119-895-824
2025-05-29 08:00:16,917 - INFO -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/app/services/financial_service.py', reloading
2025-05-29 08:00:17,115 - INFO -  * Restarting with stat
2025-05-29 08:00:18,163 - WARNING -  * Debugger is active!
2025-05-29 08:00:18,165 - INFO -  * Debugger PIN: 119-895-824
2025-05-29 08:01:01,523 - INFO -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/app/services/financial_service.py', reloading
2025-05-29 08:01:01,831 - INFO -  * Restarting with stat
2025-05-29 08:01:02,832 - WARNING -  * Debugger is active!
2025-05-29 08:01:02,835 - INFO -  * Debugger PIN: 119-895-824
2025-05-29 08:01:20,037 - INFO -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/app/services/ai_service.py', reloading
2025-05-29 08:01:20,239 - INFO -  * Restarting with stat
2025-05-29 08:01:21,077 - WARNING -  * Debugger is active!
2025-05-29 08:01:21,080 - INFO -  * Debugger PIN: 119-895-824
2025-05-29 08:03:04,056 - INFO -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/app/routes/main_routes.py', reloading
2025-05-29 08:03:04,254 - INFO -  * Restarting with stat
2025-05-29 08:03:05,327 - WARNING -  * Debugger is active!
2025-05-29 08:03:05,332 - INFO -  * Debugger PIN: 119-895-824
2025-05-29 08:03:22,556 - INFO -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/app/routes/api_routes.py', reloading
2025-05-29 08:03:22,751 - INFO -  * Restarting with stat
2025-05-29 08:03:23,596 - WARNING -  * Debugger is active!
2025-05-29 08:03:23,598 - INFO -  * Debugger PIN: 119-895-824
2025-05-29 08:04:33,208 - INFO -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/app/routes/__init__.py', reloading
2025-05-29 08:04:33,428 - INFO -  * Restarting with stat
2025-05-29 08:04:34,249 - WARNING -  * Debugger is active!
2025-05-29 08:04:34,251 - INFO -  * Debugger PIN: 119-895-824
2025-05-29 08:05:21,675 - INFO -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/app/services/exchange_service.py', reloading
2025-05-29 08:05:22,057 - INFO -  * Restarting with stat
2025-05-29 08:05:23,350 - WARNING -  * Debugger is active!
2025-05-29 08:05:23,353 - INFO -  * Debugger PIN: 119-895-824
2025-05-29 08:10:13,954 - INFO -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/app/__init__.py', reloading
2025-05-29 08:10:14,152 - INFO -  * Restarting with stat
2025-05-29 08:10:15,119 - WARNING -  * Debugger is active!
2025-05-29 08:10:15,121 - INFO -  * Debugger PIN: 119-895-824
2025-05-29 08:11:03,604 - INFO -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/run.py', reloading
2025-05-29 08:11:03,767 - INFO -  * Restarting with stat
2025-05-29 08:11:04,601 - WARNING -  * Debugger is active!
2025-05-29 08:11:04,603 - INFO -  * Debugger PIN: 119-895-824
2025-05-29 08:11:08,657 - INFO -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/run.py', reloading
2025-05-29 08:11:08,847 - INFO -  * Restarting with stat
2025-05-29 08:11:09,632 - WARNING -  * Debugger is active!
2025-05-29 08:11:09,771 - INFO -  * Debugger PIN: 119-895-824
2025-05-29 08:12:33,580 - INFO -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/app/models/models.py', reloading
2025-05-29 08:12:33,835 - INFO -  * Restarting with stat
2025-05-29 08:12:35,585 - WARNING -  * Debugger is active!
2025-05-29 08:12:35,590 - INFO -  * Debugger PIN: 119-895-824
2025-05-29 08:12:50,932 - INFO -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/app/routes/main_routes.py', reloading
2025-05-29 08:12:51,178 - INFO -  * Restarting with stat
2025-05-29 08:12:52,134 - WARNING -  * Debugger is active!
2025-05-29 08:12:52,137 - INFO -  * Debugger PIN: 119-895-824
2025-05-29 08:14:08,928 - INFO -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/app/services/financial_service.py', reloading
2025-05-29 08:14:09,528 - INFO -  * Restarting with stat
2025-05-29 08:14:11,271 - WARNING -  * Debugger is active!
2025-05-29 08:14:11,274 - INFO -  * Debugger PIN: 119-895-824
2025-05-29 08:15:21,872 - INFO -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/run.py', reloading
2025-05-29 08:15:22,038 - INFO -  * Restarting with stat
2025-05-29 08:15:23,031 - WARNING -  * Debugger is active!
2025-05-29 08:15:23,033 - INFO -  * Debugger PIN: 119-895-824
2025-05-29 08:15:58,336 - INFO -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/app/routes/main_routes.py', reloading
2025-05-29 08:15:58,518 - INFO -  * Restarting with stat
2025-05-29 08:15:59,285 - WARNING -  * Debugger is active!
2025-05-29 08:15:59,287 - INFO -  * Debugger PIN: 119-895-824
2025-05-29 08:18:29,446 - INFO - root - Custom safety settings applied.
2025-05-29 08:18:29,448 - INFO - root - Flask app created and configured.
2025-05-29 08:18:47,634 - INFO - root - Custom safety settings applied.
2025-05-29 08:18:47,637 - INFO - root - Flask app created and configured.
2025-05-29 08:19:05,616 - INFO - root - Custom safety settings applied.
2025-05-29 08:19:05,620 - INFO - root - Flask app created and configured.
2025-05-29 08:20:23,304 - INFO - root - Custom safety settings applied.
2025-05-29 08:20:23,311 - INFO - root - Flask app created and configured.
2025-05-29 08:20:41,235 - INFO - root - Custom safety settings applied.
2025-05-29 08:20:41,239 - INFO - root - Flask app created and configured.
2025-05-29 08:21:46,046 - INFO - root - Custom safety settings applied.
2025-05-29 08:21:46,051 - INFO - root - Flask app created and configured.
2025-05-29 08:21:47,439 - INFO - werkzeug - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://192.168.0.8:5001
2025-05-29 08:21:47,439 - INFO - werkzeug - [33mPress CTRL+C to quit[0m
2025-05-29 08:21:47,440 - INFO - werkzeug -  * Restarting with stat
2025-05-29 08:21:48,211 - INFO - root - Custom safety settings applied.
2025-05-29 08:21:48,214 - INFO - root - Flask app created and configured.
2025-05-29 08:21:48,457 - INFO - root - Custom safety settings applied.
2025-05-29 08:21:48,461 - INFO - root - Flask app created and configured.
2025-05-29 08:21:48,486 - WARNING - werkzeug -  * Debugger is active!
2025-05-29 08:21:48,491 - INFO - werkzeug -  * Debugger PIN: 120-847-573
2025-05-29 08:21:55,616 - INFO - werkzeug -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/run.py', reloading
2025-05-29 08:21:55,801 - INFO - werkzeug -  * Restarting with stat
2025-05-29 08:21:56,740 - INFO - root - Custom safety settings applied.
2025-05-29 08:21:56,743 - INFO - root - Flask app created and configured.
2025-05-29 08:21:56,762 - WARNING - werkzeug -  * Debugger is active!
2025-05-29 08:21:56,765 - INFO - werkzeug -  * Debugger PIN: 120-847-573
2025-05-29 08:22:14,551 - ERROR - root - Error loading dashboard for user 1: dashboard.html
Traceback (most recent call last):
  File "/home/melek/Desktop/financial_assistant/backend/app/routes/main_routes.py", line 66, in dashboard_view
    return render_template(
           ^^^^^^^^^^^^^^^^
  File "/home/melek/Desktop/financial_assistant/backend/venv/lib/python3.12/site-packages/flask/templating.py", line 149, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/melek/Desktop/financial_assistant/backend/venv/lib/python3.12/site-packages/jinja2/environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/melek/Desktop/financial_assistant/backend/venv/lib/python3.12/site-packages/jinja2/environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/melek/Desktop/financial_assistant/backend/venv/lib/python3.12/site-packages/jinja2/environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/melek/Desktop/financial_assistant/backend/venv/lib/python3.12/site-packages/jinja2/loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/melek/Desktop/financial_assistant/backend/venv/lib/python3.12/site-packages/flask/templating.py", line 65, in get_source
    return self._get_source_fast(environment, template)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/melek/Desktop/financial_assistant/backend/venv/lib/python3.12/site-packages/flask/templating.py", line 99, in _get_source_fast
    raise TemplateNotFound(template)
jinja2.exceptions.TemplateNotFound: dashboard.html
2025-05-29 08:22:14,586 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:22:14] "[35m[1mGET / HTTP/1.1[0m" 500 -
2025-05-29 08:22:16,404 - ERROR - root - Error loading dashboard for user 1: dashboard.html
Traceback (most recent call last):
  File "/home/melek/Desktop/financial_assistant/backend/app/routes/main_routes.py", line 66, in dashboard_view
    return render_template(
           ^^^^^^^^^^^^^^^^
  File "/home/melek/Desktop/financial_assistant/backend/venv/lib/python3.12/site-packages/flask/templating.py", line 149, in render_template
    template = app.jinja_env.get_or_select_template(template_name_or_list)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/melek/Desktop/financial_assistant/backend/venv/lib/python3.12/site-packages/jinja2/environment.py", line 1087, in get_or_select_template
    return self.get_template(template_name_or_list, parent, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/melek/Desktop/financial_assistant/backend/venv/lib/python3.12/site-packages/jinja2/environment.py", line 1016, in get_template
    return self._load_template(name, globals)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/melek/Desktop/financial_assistant/backend/venv/lib/python3.12/site-packages/jinja2/environment.py", line 975, in _load_template
    template = self.loader.load(self, name, self.make_globals(globals))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/melek/Desktop/financial_assistant/backend/venv/lib/python3.12/site-packages/jinja2/loaders.py", line 126, in load
    source, filename, uptodate = self.get_source(environment, name)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/melek/Desktop/financial_assistant/backend/venv/lib/python3.12/site-packages/flask/templating.py", line 65, in get_source
    return self._get_source_fast(environment, template)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/melek/Desktop/financial_assistant/backend/venv/lib/python3.12/site-packages/flask/templating.py", line 99, in _get_source_fast
    raise TemplateNotFound(template)
jinja2.exceptions.TemplateNotFound: dashboard.html
2025-05-29 08:22:16,412 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:22:16] "[35m[1mGET / HTTP/1.1[0m" 500 -
2025-05-29 08:22:16,539 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:22:16] "GET /?__debugger__=yes&cmd=resource&f=style.css HTTP/1.1" 200 -
2025-05-29 08:22:17,103 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:22:17] "GET /?__debugger__=yes&cmd=resource&f=debugger.js HTTP/1.1" 200 -
2025-05-29 08:22:17,831 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:22:17] "GET /?__debugger__=yes&cmd=resource&f=console.png&s=x4j40ebAHIOvWyeoHj7h HTTP/1.1" 200 -
2025-05-29 08:22:17,832 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:22:17] "GET /?__debugger__=yes&cmd=resource&f=console.png HTTP/1.1" 200 -
2025-05-29 08:22:20,923 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:22:20] "[36mGET /?__debugger__=yes&cmd=resource&f=console.png HTTP/1.1[0m" 304 -
2025-05-29 08:24:59,199 - INFO - root - Custom safety settings applied.
2025-05-29 08:24:59,201 - INFO - root - Flask app created and configured.
2025-05-29 08:24:59,266 - INFO - werkzeug - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://192.168.0.8:5001
2025-05-29 08:24:59,298 - INFO - werkzeug - [33mPress CTRL+C to quit[0m
2025-05-29 08:24:59,299 - INFO - werkzeug -  * Restarting with stat
2025-05-29 08:25:00,093 - INFO - root - Custom safety settings applied.
2025-05-29 08:25:00,095 - INFO - root - Flask app created and configured.
2025-05-29 08:25:00,111 - WARNING - werkzeug -  * Debugger is active!
2025-05-29 08:25:00,113 - INFO - werkzeug -  * Debugger PIN: 673-081-219
2025-05-29 08:25:03,854 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:25:03] "GET / HTTP/1.1" 200 -
2025-05-29 08:25:08,761 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:25:08] "GET /chat-page HTTP/1.1" 200 -
2025-05-29 08:25:09,730 - INFO - root - Retrieved 0 chat history entries for user 1
2025-05-29 08:25:09,732 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:25:09] "GET /api/chat-history HTTP/1.1" 200 -
2025-05-29 08:25:13,159 - INFO - root - Received chat message from user 1: hey
2025-05-29 08:25:13,159 - INFO - root - User 1 query sent to Gemini: hey
2025-05-29 08:25:33,852 - INFO - root - Final AI response to user 1: Hello! How can I help you with your finances today?

2025-05-29 08:25:35,456 - INFO - root - Chat history stored for user 1
2025-05-29 08:25:35,457 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:25:35] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 08:25:39,380 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:25:39] "GET /chat-page HTTP/1.1" 200 -
2025-05-29 08:25:39,696 - INFO - root - Retrieved 1 chat history entries for user 1
2025-05-29 08:25:39,696 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:25:39] "GET /api/chat-history HTTP/1.1" 200 -
2025-05-29 08:25:52,948 - INFO - root - Received chat message from user 1: hey what is my income for teh lats 12 months
2025-05-29 08:25:52,948 - INFO - root - User 1 query sent to Gemini: hey what is my income for teh lats 12 months
2025-05-29 08:25:54,129 - INFO - root - AI requested function call: get_current_datetime with args: {} for user 1
2025-05-29 08:25:54,129 - INFO - root - Function get_current_datetime execution result: {'date': '2025-05-29', 'time': '08:25', 'day_name': 'Thursday', 'timezone': 'Local'} for user 1
2025-05-29 08:25:54,129 - INFO - root - Sending tool responses back to AI for user 1: [{'function_response': {'name': 'get_current_datetime', 'response': {'result': {'date': '2025-05-29', 'time': '08:25', 'day_name': 'Thursday', 'timezone': 'Local'}}}}]
2025-05-29 08:25:55,768 - INFO - root - Final AI response to user 1: OK.  Based on today's date (May 29th, 2025), I'll calculate your income from June 1st, 2024 to May 29th, 2025.  Is that correct?
```tool_code
print(default_api.get_financial_summary(transaction_type='income', start_date='2024-06-01', end_date='2025-05-29', target_currency='USD'))
```
2025-05-29 08:25:56,701 - INFO - root - Chat history stored for user 1
2025-05-29 08:25:56,805 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:25:56] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 08:26:36,334 - INFO - root - Received chat message from user 1: what time is it now
2025-05-29 08:26:36,334 - INFO - root - User 1 query sent to Gemini: what time is it now
2025-05-29 08:26:37,549 - INFO - root - AI requested function call: get_current_datetime with args: {} for user 1
2025-05-29 08:26:37,549 - INFO - root - Function get_current_datetime execution result: {'date': '2025-05-29', 'time': '08:26', 'day_name': 'Thursday', 'timezone': 'Local'} for user 1
2025-05-29 08:26:37,549 - INFO - root - Sending tool responses back to AI for user 1: [{'function_response': {'name': 'get_current_datetime', 'response': {'result': {'date': '2025-05-29', 'time': '08:26', 'day_name': 'Thursday', 'timezone': 'Local'}}}}]
2025-05-29 08:26:38,578 - INFO - root - Final AI response to user 1: The current time is 08:26 on Thursday, May 29th, 2025.

2025-05-29 08:26:39,242 - INFO - root - Chat history stored for user 1
2025-05-29 08:26:39,242 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:26:39] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 08:26:49,320 - INFO - root - Received chat message from user 1: what is 1 usd in ethiopsn birr
2025-05-29 08:26:49,320 - INFO - root - User 1 query sent to Gemini: what is 1 usd in ethiopsn birr
2025-05-29 08:26:50,760 - INFO - root - AI requested function call: get_exchange_rate with args: {'to_currency': 'ETB', 'from_currency': 'USD'} for user 1
2025-05-29 08:26:51,169 - INFO - root - Function get_exchange_rate execution result: 135.1047 for user 1
2025-05-29 08:26:51,169 - INFO - root - Sending tool responses back to AI for user 1: [{'function_response': {'name': 'get_exchange_rate', 'response': {'result': 135.1047}}}]
2025-05-29 08:26:52,194 - INFO - root - Final AI response to user 1: Currently, 1 USD is equal to 135.10 ETB.

2025-05-29 08:26:53,802 - INFO - root - Chat history stored for user 1
2025-05-29 08:26:53,802 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:26:53] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 08:27:14,132 - INFO - root - Received chat message from user 1: add 100 usd income deecriopton salary
2025-05-29 08:27:14,132 - INFO - root - User 1 query sent to Gemini: add 100 usd income deecriopton salary
2025-05-29 08:27:15,073 - INFO - root - Final AI response to user 1: I need a category for this transaction.  Please provide the category.

2025-05-29 08:27:16,243 - INFO - root - Chat history stored for user 1
2025-05-29 08:27:16,244 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:27:16] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 08:27:19,889 - INFO - root - Received chat message from user 1: slary
2025-05-29 08:27:19,889 - INFO - root - User 1 query sent to Gemini: slary
2025-05-29 08:27:21,174 - INFO - root - Final AI response to user 1: I need more information to add this transaction.  Please tell me the amount, currency, and a description of the salary.

2025-05-29 08:27:22,504 - INFO - root - Chat history stored for user 1
2025-05-29 08:27:22,504 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:27:22] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 08:27:42,415 - INFO - root - Received chat message from user 1: add 1001 usd income deecriopton salary category salary
2025-05-29 08:27:42,415 - INFO - root - User 1 query sent to Gemini: add 1001 usd income deecriopton salary category salary
2025-05-29 08:27:43,698 - INFO - root - Final AI response to user 1: I noticed that there are some typos in your input. Did you mean "description" instead of "deecriopton"?  Also, could you please clarify the category?  I need both a category and a description to add the transaction.

2025-05-29 08:27:44,077 - INFO - root - Chat history stored for user 1
2025-05-29 08:27:44,077 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:27:44] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 08:28:03,624 - INFO - root - Received chat message from user 1: add 1001 usd income category salary category salary
2025-05-29 08:28:03,624 - INFO - root - User 1 query sent to Gemini: add 1001 usd income category salary category salary
2025-05-29 08:28:04,795 - INFO - root - Final AI response to user 1: OK. I understand you want to add a transaction.  I need a description for this transaction.  Can you please provide one?

2025-05-29 08:28:07,654 - INFO - root - Chat history stored for user 1
2025-05-29 08:28:07,655 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:28:07] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 08:28:30,943 - INFO - root - Received chat message from user 1: add 1001 usd income description  salary category salary
2025-05-29 08:28:30,944 - INFO - root - User 1 query sent to Gemini: add 1001 usd income description  salary category salary
2025-05-29 08:28:32,396 - INFO - root - AI requested function call: add_transaction with args: {'currency': 'USD', 'description': 'salary', 'type': 'income', 'amount': 1001.0, 'category': 'salary'} for user 1
2025-05-29 08:28:32,701 - INFO - root - Function add_transaction execution result: Income of 1001.00 USD for 'salary' added successfully at 2025-05-29 08:28. for user 1
2025-05-29 08:28:32,701 - INFO - root - Sending tool responses back to AI for user 1: [{'function_response': {'name': 'add_transaction', 'response': {'result': "Income of 1001.00 USD for 'salary' added successfully at 2025-05-29 08:28."}}}]
2025-05-29 08:28:33,953 - INFO - root - Final AI response to user 1: OK. I've added an income transaction of 1001.00 USD.  The description and category are both 'salary'.  The transaction was recorded at 8:28 AM today, May 29th, 2025.

2025-05-29 08:28:34,062 - INFO - root - Chat history stored for user 1
2025-05-29 08:28:34,062 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:28:34] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 08:28:39,788 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:28:39] "GET / HTTP/1.1" 200 -
2025-05-29 08:28:46,232 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:28:46] "GET /chat-page HTTP/1.1" 200 -
2025-05-29 08:28:46,594 - INFO - root - Retrieved 9 chat history entries for user 1
2025-05-29 08:28:46,595 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:28:46] "GET /api/chat-history HTTP/1.1" 200 -
2025-05-29 08:28:52,146 - INFO - root - Received chat message from user 1: generate financtial report
2025-05-29 08:28:52,146 - INFO - root - User 1 query sent to Gemini: generate financtial report
2025-05-29 08:28:53,197 - INFO - root - AI requested function call: generate_pdf_report with args: {} for user 1
2025-05-29 08:28:53,199 - INFO - root - Starting PDF generation for user 1 with filename: financial_report_demouser_20250529082853.pdf
2025-05-29 08:28:53,200 - INFO - root - Fetching financial data for period 2025-05-01 to 2025-05-29
2025-05-29 08:28:54,835 - INFO - root - Found 7 recent transactions for user 1
2025-05-29 08:28:54,838 - INFO - root - Successfully generated PDF report: financial_report_demouser_20250529082853.pdf for user 1
2025-05-29 08:28:54,838 - INFO - root - Function generate_pdf_report execution result: financial_report_demouser_20250529082853.pdf for user 1
2025-05-29 08:28:54,838 - INFO - root - Sending tool responses back to AI for user 1: [{'function_response': {'name': 'generate_pdf_report', 'response': {'result': 'PDF report generated successfully. Filename: financial_report_demouser_20250529082853.pdf'}}}]
2025-05-29 08:28:55,776 - INFO - root - Final AI response to user 1: I've generated the PDF report summarizing your finances. A download link will be available shortly.

2025-05-29 08:28:56,962 - INFO - root - Chat history stored for user 1
2025-05-29 08:28:56,962 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:28:56] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 08:29:27,333 - INFO - root - Received chat message from user 1: hey what is my income for teh lats 12 months
2025-05-29 08:29:27,333 - INFO - root - User 1 query sent to Gemini: hey what is my income for teh lats 12 months
2025-05-29 08:29:28,616 - INFO - root - AI requested function call: get_current_datetime with args: {} for user 1
2025-05-29 08:29:28,616 - INFO - root - Function get_current_datetime execution result: {'date': '2025-05-29', 'time': '08:29', 'day_name': 'Thursday', 'timezone': 'Local'} for user 1
2025-05-29 08:29:28,617 - INFO - root - Sending tool responses back to AI for user 1: [{'function_response': {'name': 'get_current_datetime', 'response': {'result': {'date': '2025-05-29', 'time': '08:29', 'day_name': 'Thursday', 'timezone': 'Local'}}}}]
2025-05-29 08:29:30,261 - INFO - root - Final AI response to user 1: Okay, today is 2025-05-29.  Therefore, the last 12 months span from 2024-05-29 to 2025-05-29. I will now calculate your income for this period.

```tool_code
print(default_api.get_financial_summary(transaction_type='income', start_date='2024-05-29', end_date='2025-05-29', target_currency='USD'))
```

2025-05-29 08:29:31,291 - INFO - root - Chat history stored for user 1
2025-05-29 08:29:31,291 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:29:31] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 08:30:15,618 - INFO - root - Received chat message from user 1: what was my last questino
2025-05-29 08:30:15,619 - INFO - root - User 1 query sent to Gemini: what was my last questino
2025-05-29 08:30:16,835 - INFO - root - Final AI response to user 1: Your last question was: what was my last questino
2025-05-29 08:30:17,876 - INFO - root - Chat history stored for user 1
2025-05-29 08:30:17,877 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:30:17] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 08:30:27,311 - INFO - root - Received chat message from user 1: before that
2025-05-29 08:30:27,311 - INFO - root - User 1 query sent to Gemini: before that
2025-05-29 08:30:28,609 - INFO - root - Final AI response to user 1: Before what?  Please clarify your request.

2025-05-29 08:30:29,465 - INFO - root - Chat history stored for user 1
2025-05-29 08:30:29,466 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:30:29] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 08:31:33,756 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:31:33] "GET /chat-page HTTP/1.1" 200 -
2025-05-29 08:31:34,455 - INFO - root - Retrieved 13 chat history entries for user 1
2025-05-29 08:31:34,456 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:31:34] "GET /api/chat-history HTTP/1.1" 200 -
2025-05-29 08:31:51,261 - INFO - root - Received chat message from user 1: add exespnse200 usd for food
2025-05-29 08:31:51,262 - INFO - root - User 1 query sent to Gemini: add exespnse200 usd for food
2025-05-29 08:31:52,360 - INFO - root - Final AI response to user 1: I need a category and a description for this expense before I can add the transaction.  Please provide both.

2025-05-29 08:31:52,902 - INFO - root - Chat history stored for user 1
2025-05-29 08:31:52,902 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:31:52] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 08:32:45,346 - INFO - werkzeug -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/app/routes/api_routes.py', reloading
2025-05-29 08:32:47,585 - INFO - werkzeug -  * Restarting with stat
2025-05-29 08:32:48,301 - INFO - root - Custom safety settings applied.
2025-05-29 08:32:48,302 - INFO - root - Flask app created and configured.
2025-05-29 08:32:48,318 - WARNING - werkzeug -  * Debugger is active!
2025-05-29 08:32:48,320 - INFO - werkzeug -  * Debugger PIN: 673-081-219
2025-05-29 08:32:56,578 - INFO - werkzeug -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/app/routes/api_routes.py', reloading
2025-05-29 08:32:56,803 - INFO - werkzeug -  * Restarting with stat
2025-05-29 08:32:57,767 - INFO - root - Custom safety settings applied.
2025-05-29 08:32:57,769 - INFO - root - Flask app created and configured.
2025-05-29 08:32:57,792 - WARNING - werkzeug -  * Debugger is active!
2025-05-29 08:32:57,794 - INFO - werkzeug -  * Debugger PIN: 673-081-219
2025-05-29 08:33:06,904 - INFO - werkzeug -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/app/services/ai_service.py', reloading
2025-05-29 08:33:07,140 - INFO - werkzeug -  * Restarting with stat
2025-05-29 08:33:08,811 - INFO - root - Flask app created and configured.
2025-05-29 08:33:08,829 - WARNING - werkzeug -  * Debugger is active!
2025-05-29 08:33:08,832 - INFO - werkzeug -  * Debugger PIN: 673-081-219
2025-05-29 08:33:21,096 - INFO - root - Flask app created and configured.
2025-05-29 08:33:21,150 - INFO - werkzeug - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://192.168.0.8:5001
2025-05-29 08:33:21,151 - INFO - werkzeug - [33mPress CTRL+C to quit[0m
2025-05-29 08:33:21,151 - INFO - werkzeug -  * Restarting with stat
2025-05-29 08:33:22,143 - INFO - root - Flask app created and configured.
2025-05-29 08:33:22,164 - WARNING - werkzeug -  * Debugger is active!
2025-05-29 08:33:22,166 - INFO - werkzeug -  * Debugger PIN: 673-081-219
2025-05-29 08:33:24,093 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:33:24] "GET /chat-page HTTP/1.1" 200 -
2025-05-29 08:33:24,472 - INFO - root - Retrieved and formatted 14 history entries for user 1 for display.
2025-05-29 08:33:24,474 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:33:24] "GET /api/chat-history HTTP/1.1" 200 -
2025-05-29 08:33:30,666 - INFO - root - Received chat message from user 1: hey
2025-05-29 08:33:30,668 - INFO - root - Fetched and formatted 14 history entries for user 1
2025-05-29 08:33:30,668 - ERROR - root - General AI Query handling error for user 1: name 'SAFETY_SETTINGS' is not defined
Traceback (most recent call last):
  File "/home/melek/Desktop/financial_assistant/backend/app/services/ai_service.py", line 108, in handle_ai_query
    if SAFETY_SETTINGS:
       ^^^^^^^^^^^^^^^
NameError: name 'SAFETY_SETTINGS' is not defined
2025-05-29 08:33:30,816 - INFO - root - Chat history stored for user 1
2025-05-29 08:33:30,817 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:33:30] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 08:33:52,620 - INFO - werkzeug -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/app/services/ai_service.py', reloading
2025-05-29 08:33:52,847 - INFO - werkzeug -  * Restarting with stat
2025-05-29 08:33:54,281 - INFO - root - Custom safety settings applied.
2025-05-29 08:33:54,285 - INFO - root - Flask app created and configured.
2025-05-29 08:33:54,307 - WARNING - werkzeug -  * Debugger is active!
2025-05-29 08:33:54,310 - INFO - werkzeug -  * Debugger PIN: 673-081-219
2025-05-29 08:34:11,582 - INFO - werkzeug -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/app/services/ai_service.py', reloading
2025-05-29 08:34:11,739 - INFO - werkzeug -  * Restarting with stat
2025-05-29 08:34:12,607 - INFO - root - Custom safety settings applied.
2025-05-29 08:34:12,609 - INFO - root - Flask app created and configured.
2025-05-29 08:34:12,631 - WARNING - werkzeug -  * Debugger is active!
2025-05-29 08:34:12,633 - INFO - werkzeug -  * Debugger PIN: 673-081-219
2025-05-29 08:34:16,873 - INFO - root - Custom safety settings applied.
2025-05-29 08:34:16,877 - INFO - root - Flask app created and configured.
2025-05-29 08:34:16,924 - INFO - werkzeug - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://192.168.0.8:5001
2025-05-29 08:34:16,925 - INFO - werkzeug - [33mPress CTRL+C to quit[0m
2025-05-29 08:34:16,926 - INFO - werkzeug -  * Restarting with stat
2025-05-29 08:34:17,753 - INFO - root - Custom safety settings applied.
2025-05-29 08:34:17,755 - INFO - root - Flask app created and configured.
2025-05-29 08:34:17,775 - WARNING - werkzeug -  * Debugger is active!
2025-05-29 08:34:17,780 - INFO - werkzeug -  * Debugger PIN: 673-081-219
2025-05-29 08:34:18,542 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:34:18] "GET /chat-page HTTP/1.1" 200 -
2025-05-29 08:34:19,022 - INFO - root - Retrieved and formatted 16 history entries for user 1 for display.
2025-05-29 08:34:19,023 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:34:19] "GET /api/chat-history HTTP/1.1" 200 -
2025-05-29 08:34:22,389 - INFO - root - Received chat message from user 1: hey
2025-05-29 08:34:22,392 - INFO - root - Fetched and formatted 16 history entries for user 1
2025-05-29 08:34:22,401 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:34:22] "[35m[1mPOST /api/chat HTTP/1.1[0m" 500 -
2025-05-29 08:34:52,903 - INFO - root - Custom safety settings applied.
2025-05-29 08:34:52,906 - INFO - root - Flask app created and configured.
2025-05-29 08:35:16,644 - INFO - root - Custom safety settings applied.
2025-05-29 08:35:16,647 - INFO - root - Flask app created and configured.
2025-05-29 08:35:16,716 - INFO - werkzeug - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.0.8:5000
2025-05-29 08:35:16,716 - INFO - werkzeug - [33mPress CTRL+C to quit[0m
2025-05-29 08:35:16,717 - INFO - werkzeug -  * Restarting with stat
2025-05-29 08:35:17,690 - INFO - root - Custom safety settings applied.
2025-05-29 08:35:17,693 - INFO - root - Flask app created and configured.
2025-05-29 08:35:17,715 - WARNING - werkzeug -  * Debugger is active!
2025-05-29 08:35:17,718 - INFO - werkzeug -  * Debugger PIN: 673-081-219
2025-05-29 08:35:24,119 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:35:24] "GET / HTTP/1.1" 200 -
2025-05-29 08:35:25,459 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:35:25] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-05-29 08:35:28,662 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:35:28] "GET /chat-page HTTP/1.1" 200 -
2025-05-29 08:35:28,939 - INFO - root - Retrieved 16 chat history entries for user 1
2025-05-29 08:35:28,940 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:35:28] "GET /api/chat-history HTTP/1.1" 200 -
2025-05-29 08:35:32,651 - INFO - root - Received chat message from user 1: hey
2025-05-29 08:35:32,651 - INFO - root - User 1 query sent to Gemini: hey
2025-05-29 08:35:35,066 - INFO - root - Final AI response to user 1: Hello! How can I help you with your finances today?

2025-05-29 08:35:35,152 - INFO - root - Chat history stored for user 1
2025-05-29 08:35:35,153 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:35:35] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 08:37:05,899 - INFO - root - Received chat message from user 1: hey what is my income for teh lats 12 months
2025-05-29 08:37:05,899 - INFO - root - User 1 query sent to Gemini: hey what is my income for teh lats 12 months
2025-05-29 08:37:07,216 - INFO - root - AI requested function call: get_current_datetime with args: {} for user 1
2025-05-29 08:37:07,216 - INFO - root - Function get_current_datetime execution result: {'date': '2025-05-29', 'time': '08:37', 'day_name': 'Thursday', 'timezone': 'Local'} for user 1
2025-05-29 08:37:07,216 - INFO - root - Sending tool responses back to AI for user 1: [{'function_response': {'name': 'get_current_datetime', 'response': {'result': {'date': '2025-05-29', 'time': '08:37', 'day_name': 'Thursday', 'timezone': 'Local'}}}}]
2025-05-29 08:37:08,970 - INFO - root - Final AI response to user 1: OK. Based on today's date (May 29th, 2025), I'll calculate your income from June 1st, 2024 to May 29th, 2025.  I'll now proceed with calculating your income summary.

```tool_code
print(default_api.get_financial_summary(transaction_type='income', start_date='2024-06-01', end_date='2025-05-29', target_currency='USD'))
```

2025-05-29 08:37:10,240 - INFO - root - Chat history stored for user 1
2025-05-29 08:37:10,241 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:37:10] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 08:38:43,850 - INFO - root - Received chat message from user 1: hey what is my income for teh lats 12 months in usd
2025-05-29 08:38:43,850 - INFO - root - User 1 query sent to Gemini: hey what is my income for teh lats 12 months in usd
2025-05-29 08:38:45,100 - INFO - root - AI requested function call: get_current_datetime with args: {} for user 1
2025-05-29 08:38:45,100 - INFO - root - Function get_current_datetime execution result: {'date': '2025-05-29', 'time': '08:38', 'day_name': 'Thursday', 'timezone': 'Local'} for user 1
2025-05-29 08:38:45,100 - INFO - root - Sending tool responses back to AI for user 1: [{'function_response': {'name': 'get_current_datetime', 'response': {'result': {'date': '2025-05-29', 'time': '08:38', 'day_name': 'Thursday', 'timezone': 'Local'}}}}]
2025-05-29 08:38:46,686 - INFO - root - Final AI response to user 1: Okay, using today's date (2025-05-29), the last 12 months is from 2024-05-29 to 2025-05-29.  I will now calculate your income summary.

```tool_code
print(default_api.get_financial_summary(transaction_type='income', start_date='2024-05-29', end_date='2025-05-29', target_currency='USD'))
```
2025-05-29 08:38:47,542 - INFO - root - Chat history stored for user 1
2025-05-29 08:38:47,542 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:38:47] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 08:39:05,995 - INFO - werkzeug -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/app/services/financial_service.py', reloading
2025-05-29 08:39:08,174 - INFO - werkzeug -  * Restarting with stat
2025-05-29 08:39:09,521 - INFO - root - Custom safety settings applied.
2025-05-29 08:39:09,524 - INFO - root - Flask app created and configured.
2025-05-29 08:39:09,544 - WARNING - werkzeug -  * Debugger is active!
2025-05-29 08:39:09,546 - INFO - werkzeug -  * Debugger PIN: 673-081-219
2025-05-29 08:40:28,231 - INFO - werkzeug -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/app/services/ai_service.py', reloading
2025-05-29 08:40:28,390 - INFO - werkzeug -  * Restarting with stat
2025-05-29 08:40:31,550 - INFO - root - Custom safety settings applied.
2025-05-29 08:40:31,552 - INFO - root - Flask app created and configured.
2025-05-29 08:40:31,618 - INFO - werkzeug - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.0.8:5000
2025-05-29 08:40:31,618 - INFO - werkzeug - [33mPress CTRL+C to quit[0m
2025-05-29 08:40:31,618 - INFO - werkzeug -  * Restarting with stat
2025-05-29 08:40:32,389 - INFO - root - Custom safety settings applied.
2025-05-29 08:40:32,392 - INFO - root - Flask app created and configured.
2025-05-29 08:40:32,409 - WARNING - werkzeug -  * Debugger is active!
2025-05-29 08:40:32,412 - INFO - werkzeug -  * Debugger PIN: 673-081-219
2025-05-29 08:40:32,988 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:40:32] "GET /chat-page HTTP/1.1" 200 -
2025-05-29 08:40:33,506 - INFO - root - Retrieved 19 chat history entries for user 1
2025-05-29 08:40:33,506 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:40:33] "GET /api/chat-history HTTP/1.1" 200 -
2025-05-29 08:40:41,009 - INFO - root - Received chat message from user 1: hey what is my income for teh lats 12 months in usd
2025-05-29 08:40:41,010 - INFO - root - User 1 query sent to Gemini: hey what is my income for teh lats 12 months in usd
2025-05-29 08:40:44,688 - ERROR - root - Unexpected error during initial send_message: content {
}
finish_reason: MALFORMED_FUNCTION_CALL
Traceback (most recent call last):
  File "/home/melek/Desktop/financial_assistant/backend/app/services/ai_service.py", line 215, in handle_ai_query
    response = chat.send_message(query_text, tools=[{'function_declarations': TOOL_DECLARATIONS}])
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/melek/Desktop/financial_assistant/backend/venv/lib/python3.12/site-packages/google/generativeai/generative_models.py", line 588, in send_message
    self._check_response(response=response, stream=stream)
  File "/home/melek/Desktop/financial_assistant/backend/venv/lib/python3.12/site-packages/google/generativeai/generative_models.py", line 616, in _check_response
    raise generation_types.StopCandidateException(response.candidates[0])
google.generativeai.types.generation_types.StopCandidateException: content {
}
finish_reason: MALFORMED_FUNCTION_CALL

2025-05-29 08:40:45,133 - INFO - root - Chat history stored for user 1
2025-05-29 08:40:45,133 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:40:45] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 08:40:56,314 - INFO - root - Received chat message from user 1: add exespnse200 usd for food
2025-05-29 08:40:56,314 - INFO - root - User 1 query sent to Gemini: add exespnse200 usd for food
2025-05-29 08:40:57,503 - INFO - root - Final AI response to user 1: I need a category for this expense. What category would you like to use?

2025-05-29 08:40:58,252 - INFO - root - Chat history stored for user 1
2025-05-29 08:40:58,252 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:40:58] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 08:41:01,182 - INFO - root - Received chat message from user 1: food
2025-05-29 08:41:01,183 - INFO - root - User 1 query sent to Gemini: food
2025-05-29 08:41:02,250 - INFO - root - Final AI response to user 1: I need more information to add this transaction.  Please tell me the amount, currency, and a description.

2025-05-29 08:41:04,461 - INFO - root - Chat history stored for user 1
2025-05-29 08:41:04,462 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:41:04] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 08:41:26,483 - INFO - root - Received chat message from user 1: add 1001 usd income category salary category salary
2025-05-29 08:41:26,483 - INFO - root - User 1 query sent to Gemini: add 1001 usd income category salary category salary
2025-05-29 08:41:27,705 - INFO - root - AI requested function call: add_transaction with args: {'currency': 'USD', 'description': 'Salary', 'type': 'income', 'amount': 1001.0, 'category': 'Salary'} for user 1
2025-05-29 08:41:27,932 - INFO - root - Function add_transaction execution result: Income of 1001.00 USD for 'Salary' added successfully at 2025-05-29 08:41. for user 1
2025-05-29 08:41:27,932 - INFO - root - Sending tool responses back to AI for user 1: [{'function_response': {'name': 'add_transaction', 'response': {'result': "Income of 1001.00 USD for 'Salary' added successfully at 2025-05-29 08:41."}}}]
2025-05-29 08:41:29,078 - INFO - root - Final AI response to user 1: OK. Income of 1001.00 USD for 'Salary' added successfully at 2025-05-29 08:41.

2025-05-29 08:41:29,153 - INFO - root - Chat history stored for user 1
2025-05-29 08:41:29,154 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:41:29] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 08:41:33,898 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:41:33] "GET / HTTP/1.1" 200 -
2025-05-29 08:41:37,980 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:41:37] "GET /chat-page HTTP/1.1" 200 -
2025-05-29 08:41:38,251 - INFO - root - Retrieved 23 chat history entries for user 1
2025-05-29 08:41:38,252 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:41:38] "GET /api/chat-history HTTP/1.1" 200 -
2025-05-29 08:42:13,106 - INFO - root - Received chat message from user 1: what is my income this month
2025-05-29 08:42:13,106 - INFO - root - User 1 query sent to Gemini: what is my income this month
2025-05-29 08:42:14,339 - INFO - root - AI requested function call: get_current_datetime with args: {} for user 1
2025-05-29 08:42:14,339 - INFO - root - Function get_current_datetime execution result: {'date': '2025-05-29', 'time': '08:42', 'day_name': 'Thursday', 'timezone': 'Local'} for user 1
2025-05-29 08:42:14,339 - INFO - root - Sending tool responses back to AI for user 1: [{'function_response': {'name': 'get_current_datetime', 'response': {'result': {'date': '2025-05-29', 'time': '08:42', 'day_name': 'Thursday', 'timezone': 'Local'}}}}]
2025-05-29 08:42:15,685 - INFO - root - Final AI response to user 1: To calculate your income this month, I need to know the exact start and end dates.  Based on today's date, May 29th, 2025, this month runs from 2025-05-01 to 2025-05-31.  Is that correct?

2025-05-29 08:42:16,252 - INFO - root - Chat history stored for user 1
2025-05-29 08:42:16,252 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:42:16] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 08:47:05,978 - INFO - werkzeug -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/app/services/ai_service.py', reloading
2025-05-29 08:47:10,432 - INFO - root - Custom safety settings applied.
2025-05-29 08:47:10,434 - INFO - root - Flask app created and configured.
2025-05-29 08:47:10,470 - INFO - werkzeug - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.0.8:5000
2025-05-29 08:47:10,470 - INFO - werkzeug - [33mPress CTRL+C to quit[0m
2025-05-29 08:47:10,471 - INFO - werkzeug -  * Restarting with stat
2025-05-29 08:47:11,393 - INFO - root - Custom safety settings applied.
2025-05-29 08:47:11,397 - INFO - root - Flask app created and configured.
2025-05-29 08:47:11,425 - WARNING - werkzeug -  * Debugger is active!
2025-05-29 08:47:11,428 - INFO - werkzeug -  * Debugger PIN: 673-081-219
2025-05-29 08:47:36,003 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:47:36] "GET /chat-page HTTP/1.1" 200 -
2025-05-29 08:47:36,557 - INFO - root - Retrieved 24 chat history entries for user 1
2025-05-29 08:47:36,559 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:47:36] "GET /api/chat-history HTTP/1.1" 200 -
2025-05-29 08:47:41,033 - INFO - root - Received chat message from user 1: add 1001 usd income category salary category salary
2025-05-29 08:47:41,034 - INFO - root - User 1 query sent to Gemini: add 1001 usd income category salary category salary
2025-05-29 08:47:43,642 - INFO - root - AI requested function call: add_transaction with args: {'currency': 'USD', 'description': 'Salary', 'type': 'income', 'amount': 1001.0, 'category': 'Salary'} for user 1
2025-05-29 08:47:44,157 - INFO - root - Function add_transaction execution result: Income of 1001.00 USD for 'Salary' added successfully at 2025-05-29 08:47. for user 1
2025-05-29 08:47:44,157 - INFO - root - Sending tool responses back to AI for user 1: [{'function_response': {'name': 'add_transaction', 'response': {'result': "Income of 1001.00 USD for 'Salary' added successfully at 2025-05-29 08:47."}}}]
2025-05-29 08:47:45,299 - INFO - root - Final AI response to user 1: Perfect! Income of 1001.00 USD for 'Salary' added successfully at 2025-05-29 08:47.

2025-05-29 08:47:47,362 - INFO - root - Chat history stored for user 1
2025-05-29 08:47:47,362 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:47:47] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 08:47:53,357 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:47:53] "GET / HTTP/1.1" 200 -
2025-05-29 08:47:56,182 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:47:56] "GET /chat-page HTTP/1.1" 200 -
2025-05-29 08:47:56,524 - INFO - root - Retrieved 25 chat history entries for user 1
2025-05-29 08:47:56,525 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:47:56] "GET /api/chat-history HTTP/1.1" 200 -
2025-05-29 08:48:09,208 - INFO - root - Received chat message from user 1: add expsene of 5000 usd
2025-05-29 08:48:09,208 - INFO - root - User 1 query sent to Gemini: add expsene of 5000 usd
2025-05-29 08:48:10,533 - INFO - root - Final AI response to user 1: I need a category and description for this expense.  What category and description would you like to use for this $5000 USD expense?

2025-05-29 08:48:11,690 - INFO - root - Chat history stored for user 1
2025-05-29 08:48:11,690 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:48:11] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 08:48:23,252 - INFO - root - Received chat message from user 1: add expsene of 5000 usd category food descrioption food
2025-05-29 08:48:23,252 - INFO - root - User 1 query sent to Gemini: add expsene of 5000 usd category food descrioption food
2025-05-29 08:48:24,518 - INFO - root - Final AI response to user 1: I need a little more information to add the transaction.  What type of transaction is it ('income' or 'expense')?

2025-05-29 08:48:28,611 - INFO - root - Chat history stored for user 1
2025-05-29 08:48:28,612 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:48:28] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 08:48:40,233 - INFO - root - Received chat message from user 1: add expense of 5000 usd category food descrioption food
2025-05-29 08:48:40,233 - INFO - root - User 1 query sent to Gemini: add expense of 5000 usd category food descrioption food
2025-05-29 08:48:41,810 - INFO - root - AI requested function call: add_transaction with args: {'currency': 'USD', 'description': 'food', 'type': 'expense', 'amount': 5000.0, 'category': 'Food'} for user 1
2025-05-29 08:48:42,048 - INFO - root - Function add_transaction execution result: Expense of 5000.00 USD for 'food' added successfully at 2025-05-29 08:48. for user 1
2025-05-29 08:48:42,048 - INFO - root - Sending tool responses back to AI for user 1: [{'function_response': {'name': 'add_transaction', 'response': {'result': "Expense of 5000.00 USD for 'food' added successfully at 2025-05-29 08:48."}}}]
2025-05-29 08:48:43,090 - INFO - root - Final AI response to user 1: OK. Expense of 5000.00 USD for 'food' added successfully at 2025-05-29 08:48.

2025-05-29 08:48:43,268 - INFO - root - Chat history stored for user 1
2025-05-29 08:48:43,269 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:48:43] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 08:48:54,267 - INFO - root - Received chat message from user 1: hey what is my income for teh lats 12 months in usd
2025-05-29 08:48:54,267 - INFO - root - User 1 query sent to Gemini: hey what is my income for teh lats 12 months in usd
2025-05-29 08:48:56,159 - ERROR - root - Unexpected error during initial send_message: content {
}
finish_reason: MALFORMED_FUNCTION_CALL
Traceback (most recent call last):
  File "/home/melek/Desktop/financial_assistant/backend/app/services/ai_service.py", line 220, in handle_ai_query
    response = chat.send_message(query_text, tools=[{'function_declarations': TOOL_DECLARATIONS}])
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/melek/Desktop/financial_assistant/backend/venv/lib/python3.12/site-packages/google/generativeai/generative_models.py", line 588, in send_message
    self._check_response(response=response, stream=stream)
  File "/home/melek/Desktop/financial_assistant/backend/venv/lib/python3.12/site-packages/google/generativeai/generative_models.py", line 616, in _check_response
    raise generation_types.StopCandidateException(response.candidates[0])
google.generativeai.types.generation_types.StopCandidateException: content {
}
finish_reason: MALFORMED_FUNCTION_CALL

2025-05-29 08:48:56,202 - INFO - root - Chat history stored for user 1
2025-05-29 08:48:56,202 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:48:56] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 08:49:23,532 - INFO - werkzeug -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/app/services/ai_service.py', reloading
2025-05-29 08:49:25,794 - INFO - werkzeug -  * Restarting with stat
2025-05-29 08:49:26,867 - INFO - root - Custom safety settings applied.
2025-05-29 08:49:26,870 - INFO - root - Flask app created and configured.
2025-05-29 08:49:26,895 - WARNING - werkzeug -  * Debugger is active!
2025-05-29 08:49:26,898 - INFO - werkzeug -  * Debugger PIN: 673-081-219
2025-05-29 08:49:43,057 - INFO - werkzeug -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/app/services/financial_service.py', reloading
2025-05-29 08:49:43,216 - INFO - werkzeug -  * Restarting with stat
2025-05-29 08:49:43,987 - INFO - root - Custom safety settings applied.
2025-05-29 08:49:43,990 - INFO - root - Flask app created and configured.
2025-05-29 08:49:44,009 - WARNING - werkzeug -  * Debugger is active!
2025-05-29 08:49:44,011 - INFO - werkzeug -  * Debugger PIN: 673-081-219
2025-05-29 08:49:51,092 - INFO - werkzeug -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/app/services/financial_service.py', reloading
2025-05-29 08:49:51,313 - INFO - werkzeug -  * Restarting with stat
2025-05-29 08:49:52,313 - INFO - root - Custom safety settings applied.
2025-05-29 08:49:52,317 - INFO - root - Flask app created and configured.
2025-05-29 08:49:52,338 - WARNING - werkzeug -  * Debugger is active!
2025-05-29 08:49:52,340 - INFO - werkzeug -  * Debugger PIN: 673-081-219
2025-05-29 08:49:53,366 - INFO - werkzeug -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/app/services/financial_service.py', reloading
2025-05-29 08:49:53,561 - INFO - werkzeug -  * Restarting with stat
2025-05-29 08:49:54,605 - INFO - root - Custom safety settings applied.
2025-05-29 08:49:54,609 - INFO - root - Flask app created and configured.
2025-05-29 08:49:54,636 - WARNING - werkzeug -  * Debugger is active!
2025-05-29 08:49:54,638 - INFO - werkzeug -  * Debugger PIN: 673-081-219
2025-05-29 08:50:25,943 - INFO - werkzeug -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/app/services/ai_service.py', reloading
2025-05-29 08:50:26,167 - INFO - werkzeug -  * Restarting with stat
2025-05-29 08:50:27,857 - INFO - root - Custom safety settings applied.
2025-05-29 08:50:27,860 - INFO - root - Flask app created and configured.
2025-05-29 08:50:27,880 - WARNING - werkzeug -  * Debugger is active!
2025-05-29 08:50:27,882 - INFO - werkzeug -  * Debugger PIN: 673-081-219
2025-05-29 08:50:35,497 - INFO - root - Custom safety settings applied.
2025-05-29 08:50:35,505 - INFO - root - Flask app created and configured.
2025-05-29 08:50:35,583 - INFO - werkzeug - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.0.8:5000
2025-05-29 08:50:35,765 - INFO - werkzeug - [33mPress CTRL+C to quit[0m
2025-05-29 08:50:35,766 - INFO - werkzeug -  * Restarting with stat
2025-05-29 08:50:37,126 - INFO - root - Custom safety settings applied.
2025-05-29 08:50:37,133 - INFO - root - Flask app created and configured.
2025-05-29 08:50:37,161 - WARNING - werkzeug -  * Debugger is active!
2025-05-29 08:50:37,165 - INFO - werkzeug -  * Debugger PIN: 673-081-219
2025-05-29 08:50:37,199 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:50:37] "GET /chat-page HTTP/1.1" 200 -
2025-05-29 08:50:38,180 - INFO - root - Retrieved 29 chat history entries for user 1
2025-05-29 08:50:38,183 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:50:38] "GET /api/chat-history HTTP/1.1" 200 -
2025-05-29 08:50:45,602 - INFO - root - Received chat message from user 1: add expense of 5000 usd category food descrioption food
2025-05-29 08:50:45,602 - INFO - root - User 1 query sent to Gemini: add expense of 5000 usd category food descrioption food
2025-05-29 08:50:48,502 - INFO - root - AI requested function call: add_transaction with args: {'amount': 5000.0, 'description': 'food', 'type': 'expense', 'currency': 'USD', 'category': 'Food'} for user 1
2025-05-29 08:50:49,328 - INFO - root - Function add_transaction execution result: Expense of 5000.00 USD for 'food' added successfully at 2025-05-29 08:50. for user 1
2025-05-29 08:50:49,329 - INFO - root - Sending tool responses back to AI for user 1: [{'function_response': {'name': 'add_transaction', 'response': {'result': "Expense of 5000.00 USD for 'food' added successfully at 2025-05-29 08:50."}}}]
2025-05-29 08:50:50,489 - INFO - root - Final AI response to user 1: OK. Expense of 5000.00 USD for 'food' added successfully at 2025-05-29 08:50.

2025-05-29 08:50:51,098 - INFO - root - Chat history stored for user 1
2025-05-29 08:50:51,099 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:50:51] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 08:50:54,031 - INFO - root - Received chat message from user 1: hey what is my income for teh lats 12 months in usd
2025-05-29 08:50:54,031 - INFO - root - User 1 query sent to Gemini: hey what is my income for teh lats 12 months in usd
2025-05-29 08:50:55,204 - INFO - root - AI requested function call: get_current_datetime with args: {} for user 1
2025-05-29 08:50:55,204 - INFO - root - Function get_current_datetime execution result: {'date': '2025-05-29', 'time': '08:50', 'day_name': 'Thursday', 'timezone': 'Local'} for user 1
2025-05-29 08:50:55,204 - INFO - root - Sending tool responses back to AI for user 1: [{'function_response': {'name': 'get_current_datetime', 'response': {'result': {'date': '2025-05-29', 'time': '08:50', 'day_name': 'Thursday', 'timezone': 'Local'}}}}]
2025-05-29 08:50:56,802 - INFO - root - Final AI response to user 1: ```tool_code
print(default_api.get_financial_summary(transaction_type = 'income', start_date = '2024-05-29', end_date = '2025-05-29', target_currency = 'USD'))
```
2025-05-29 08:50:58,257 - INFO - root - Chat history stored for user 1
2025-05-29 08:50:58,257 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:50:58] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 08:51:56,224 - INFO - root - Received chat message from user 1: what is teh exchange rate of ethioian birr to usd
2025-05-29 08:51:56,224 - INFO - root - User 1 query sent to Gemini: what is teh exchange rate of ethioian birr to usd
2025-05-29 08:51:57,949 - INFO - root - AI requested function call: get_exchange_rate with args: {'to_currency': 'USD', 'from_currency': 'ETB'} for user 1
2025-05-29 08:51:58,626 - INFO - root - Function get_exchange_rate execution result: 0.007372 for user 1
2025-05-29 08:51:58,626 - INFO - root - Sending tool responses back to AI for user 1: [{'function_response': {'name': 'get_exchange_rate', 'response': {'result': 0.007372}}}]
2025-05-29 08:52:00,092 - INFO - root - Final AI response to user 1: The current exchange rate for Ethiopian Birr (ETB) to US Dollar (USD) is 0.007372.

2025-05-29 08:52:00,187 - INFO - root - Chat history stored for user 1
2025-05-29 08:52:00,188 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:52:00] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 08:52:09,301 - INFO - root - Received chat message from user 1: ok the reverse
2025-05-29 08:52:09,301 - INFO - root - User 1 query sent to Gemini: ok the reverse
2025-05-29 08:52:10,973 - INFO - root - AI requested function call: get_exchange_rate with args: {'to_currency': 'ETB', 'from_currency': 'USD'} for user 1
2025-05-29 08:52:12,295 - INFO - root - Function get_exchange_rate execution result: 135.1047 for user 1
2025-05-29 08:52:12,295 - INFO - root - Sending tool responses back to AI for user 1: [{'function_response': {'name': 'get_exchange_rate', 'response': {'result': 135.1047}}}]
2025-05-29 08:52:13,544 - INFO - root - Final AI response to user 1: The exchange rate for USD to ETB is 135.1047.

2025-05-29 08:52:15,214 - INFO - root - Chat history stored for user 1
2025-05-29 08:52:15,215 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:52:15] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 08:52:26,872 - INFO - root - Received chat message from user 1: add 1000 usd as expense
2025-05-29 08:52:26,872 - INFO - root - User 1 query sent to Gemini: add 1000 usd as expense
2025-05-29 08:52:28,436 - INFO - root - Final AI response to user 1: What category and description would you like to use for this expense?

2025-05-29 08:52:29,338 - INFO - root - Chat history stored for user 1
2025-05-29 08:52:29,338 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:52:29] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 08:52:30,553 - INFO - root - Received chat message from user 1: food
2025-05-29 08:52:30,553 - INFO - root - User 1 query sent to Gemini: food
2025-05-29 08:52:32,562 - INFO - root - AI requested function call: add_transaction with args: {'currency': 'USD', 'description': 'Food', 'type': 'expense', 'amount': 1000.0, 'category': 'Food'} for user 1
2025-05-29 08:52:33,348 - INFO - root - Function add_transaction execution result: Expense of 1000.00 USD for 'Food' added successfully at 2025-05-29 08:52. for user 1
2025-05-29 08:52:33,348 - INFO - root - Sending tool responses back to AI for user 1: [{'function_response': {'name': 'add_transaction', 'response': {'result': "Expense of 1000.00 USD for 'Food' added successfully at 2025-05-29 08:52."}}}]
2025-05-29 08:52:34,665 - INFO - root - Final AI response to user 1: OK. Expense of 1000.00 USD for 'Food' added successfully at 2025-05-29 08:52.

2025-05-29 08:52:35,816 - INFO - root - Chat history stored for user 1
2025-05-29 08:52:35,816 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:52:35] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 08:52:37,302 - INFO - werkzeug -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/app/services/ai_service.py', reloading
2025-05-29 08:52:39,475 - INFO - werkzeug -  * Restarting with stat
2025-05-29 08:52:41,179 - INFO - root - Custom safety settings applied.
2025-05-29 08:52:41,185 - INFO - root - Flask app created and configured.
2025-05-29 08:52:41,222 - WARNING - werkzeug -  * Debugger is active!
2025-05-29 08:52:41,226 - INFO - werkzeug -  * Debugger PIN: 673-081-219
2025-05-29 08:52:53,365 - INFO - werkzeug -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/app/services/ai_service.py', reloading
2025-05-29 08:52:53,528 - INFO - werkzeug -  * Restarting with stat
2025-05-29 08:52:54,331 - INFO - root - Custom safety settings applied.
2025-05-29 08:52:54,334 - INFO - root - Flask app created and configured.
2025-05-29 08:52:54,352 - WARNING - werkzeug -  * Debugger is active!
2025-05-29 08:52:54,355 - INFO - werkzeug -  * Debugger PIN: 673-081-219
2025-05-29 08:53:02,396 - INFO - root - Custom safety settings applied.
2025-05-29 08:53:02,401 - INFO - root - Flask app created and configured.
2025-05-29 08:53:02,765 - INFO - werkzeug - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.0.8:5000
2025-05-29 08:53:02,765 - INFO - werkzeug - [33mPress CTRL+C to quit[0m
2025-05-29 08:53:02,766 - INFO - werkzeug -  * Restarting with stat
2025-05-29 08:53:03,604 - INFO - root - Custom safety settings applied.
2025-05-29 08:53:03,607 - INFO - root - Flask app created and configured.
2025-05-29 08:53:03,626 - WARNING - werkzeug -  * Debugger is active!
2025-05-29 08:53:03,628 - INFO - werkzeug -  * Debugger PIN: 673-081-219
2025-05-29 08:53:03,804 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:53:03] "GET /chat-page HTTP/1.1" 200 -
2025-05-29 08:53:04,355 - INFO - root - Retrieved 35 chat history entries for user 1
2025-05-29 08:53:04,356 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:53:04] "GET /api/chat-history HTTP/1.1" 200 -
2025-05-29 08:53:10,142 - INFO - root - Received chat message from user 1: hey what is my income for teh lats 12 months in usd
2025-05-29 08:53:10,143 - INFO - root - User 1 query sent to Gemini: hey what is my income for teh lats 12 months in usd
2025-05-29 08:53:14,915 - ERROR - root - Unexpected error during initial send_message: content {
}
finish_reason: MALFORMED_FUNCTION_CALL
Traceback (most recent call last):
  File "/home/melek/Desktop/financial_assistant/backend/app/services/ai_service.py", line 226, in handle_ai_query
    response = chat.send_message(query_text, tools=[{'function_declarations': TOOL_DECLARATIONS}])
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/melek/Desktop/financial_assistant/backend/venv/lib/python3.12/site-packages/google/generativeai/generative_models.py", line 588, in send_message
    self._check_response(response=response, stream=stream)
  File "/home/melek/Desktop/financial_assistant/backend/venv/lib/python3.12/site-packages/google/generativeai/generative_models.py", line 616, in _check_response
    raise generation_types.StopCandidateException(response.candidates[0])
google.generativeai.types.generation_types.StopCandidateException: content {
}
finish_reason: MALFORMED_FUNCTION_CALL

2025-05-29 08:53:15,964 - INFO - root - Chat history stored for user 1
2025-05-29 08:53:15,965 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:53:15] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 08:53:55,803 - INFO - root - Received chat message from user 1: hey what is my income for teh lats 12 months
2025-05-29 08:53:55,803 - INFO - root - User 1 query sent to Gemini: hey what is my income for teh lats 12 months
2025-05-29 08:53:57,368 - INFO - root - AI requested function call: get_current_datetime with args: {} for user 1
2025-05-29 08:53:57,368 - INFO - root - Function get_current_datetime execution result: {'date': '2025-05-29', 'time': '08:53', 'day_name': 'Thursday', 'timezone': 'Local'} for user 1
2025-05-29 08:53:57,368 - INFO - root - Sending tool responses back to AI for user 1: [{'function_response': {'name': 'get_current_datetime', 'response': {'result': {'date': '2025-05-29', 'time': '08:53', 'day_name': 'Thursday', 'timezone': 'Local'}}}}]
2025-05-29 08:53:59,114 - INFO - root - Final AI response to user 1: Okay, chill.  Let me get that for you.

To clarify, "teh lats 12 months" means the period from May 29th, 2024 to May 29th, 2025, right?


```tool_code
print(default_api.get_financial_summary(transaction_type='income', start_date='2024-05-29', end_date='2025-05-29', target_currency='USD'))
```

2025-05-29 08:54:00,453 - INFO - root - Received chat message from user 1: what time is it now
2025-05-29 08:54:00,453 - INFO - root - User 1 query sent to Gemini: what time is it now
2025-05-29 08:54:01,415 - INFO - root - Chat history stored for user 1
2025-05-29 08:54:01,415 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:54:01] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 08:54:01,645 - INFO - root - Final AI response to user 1: Hey, it's 08:53 right now, according to my clock.

2025-05-29 08:54:01,776 - INFO - root - Chat history stored for user 1
2025-05-29 08:54:01,777 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:54:01] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 08:54:46,390 - INFO - root - Received chat message from user 1: hey what is my income for teh lats 12 months in usd
2025-05-29 08:54:46,390 - INFO - root - User 1 query sent to Gemini: hey what is my income for teh lats 12 months in usd
2025-05-29 08:54:47,926 - INFO - root - AI requested function call: get_current_datetime with args: {} for user 1
2025-05-29 08:54:47,926 - INFO - root - Function get_current_datetime execution result: {'date': '2025-05-29', 'time': '08:54', 'day_name': 'Thursday', 'timezone': 'Local'} for user 1
2025-05-29 08:54:47,926 - INFO - root - Sending tool responses back to AI for user 1: [{'function_response': {'name': 'get_current_datetime', 'response': {'result': {'date': '2025-05-29', 'time': '08:54', 'day_name': 'Thursday', 'timezone': 'Local'}}}}]
2025-05-29 08:54:49,974 - INFO - root - Final AI response to user 1: Cool, cool.  "Teh lats 12 months" means the period from May 29th, 2024 to May 29th, 2025, in USD, correct?

```tool_code
print(default_api.get_financial_summary(transaction_type='income', start_date='2024-05-29', end_date='2025-05-29', target_currency='USD'))
```

2025-05-29 08:54:51,246 - INFO - root - Chat history stored for user 1
2025-05-29 08:54:51,247 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:54:51] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 08:55:05,487 - INFO - root - Received chat message from user 1: add expense of 5000 usd category food descrioption food
2025-05-29 08:55:05,488 - INFO - root - User 1 query sent to Gemini: add expense of 5000 usd category food descrioption food
2025-05-29 08:55:06,873 - INFO - root - AI requested function call: add_transaction with args: {'currency': 'USD', 'description': 'food', 'type': 'expense', 'amount': 5000.0, 'category': 'Food'} for user 1
2025-05-29 08:55:08,419 - INFO - root - Function add_transaction execution result: Expense of 5000.00 USD for 'food' added successfully at 2025-05-29 08:55. for user 1
2025-05-29 08:55:08,420 - INFO - root - Sending tool responses back to AI for user 1: [{'function_response': {'name': 'add_transaction', 'response': {'result': "Expense of 5000.00 USD for 'food' added successfully at 2025-05-29 08:55."}}}]
2025-05-29 08:55:09,973 - INFO - root - Final AI response to user 1: No problem.  I've added an expense of 5000.00 USD to your records.  The category is Food, and the description is food.  It's recorded as of today, 2025-05-29 at 08:55.

2025-05-29 08:55:11,055 - INFO - root - Chat history stored for user 1
2025-05-29 08:55:11,056 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:55:11] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 08:55:17,128 - INFO - root - Received chat message from user 1: generate financial report
2025-05-29 08:55:17,173 - INFO - root - User 1 query sent to Gemini: generate financial report
2025-05-29 08:55:18,930 - INFO - root - AI requested function call: generate_pdf_report with args: {} for user 1
2025-05-29 08:55:18,932 - INFO - root - Starting PDF generation for user 1 with filename: financial_report_demouser_20250529085518.pdf
2025-05-29 08:55:18,934 - INFO - root - Fetching financial data for period 2025-05-01 to 2025-05-29
2025-05-29 08:55:18,936 - INFO - root - Calculating income from 2025-05-01 to 2025-05-29 (inclusive) for user 1
2025-05-29 08:55:18,938 - INFO - root - Total income for user 1: 5603.0 USD
2025-05-29 08:55:18,939 - INFO - root - Calculating expense from 2025-05-01 to 2025-05-29 (inclusive) for user 1
2025-05-29 08:55:21,377 - INFO - root - Total expense for user 1: 16278.75 USD
2025-05-29 08:55:21,379 - INFO - root - Found 10 recent transactions for user 1
2025-05-29 08:55:21,407 - INFO - root - Successfully generated PDF report: financial_report_demouser_20250529085518.pdf for user 1
2025-05-29 08:55:21,407 - INFO - root - Function generate_pdf_report execution result: financial_report_demouser_20250529085518.pdf for user 1
2025-05-29 08:55:21,407 - INFO - root - Sending tool responses back to AI for user 1: [{'function_response': {'name': 'generate_pdf_report', 'response': {'result': 'PDF report generated successfully. Filename: financial_report_demouser_20250529085518.pdf'}}}]
2025-05-29 08:55:22,998 - INFO - root - Final AI response to user 1: Okay, I've generated your financial report. You can download it here: `financial_report_demouser_20250529085518.pdf`

2025-05-29 08:55:23,022 - INFO - root - Chat history stored for user 1
2025-05-29 08:55:23,022 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:55:23] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 08:55:34,324 - INFO - werkzeug -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/app/services/ai_service.py', reloading
2025-05-29 08:55:36,626 - INFO - werkzeug -  * Restarting with stat
2025-05-29 08:55:37,731 - INFO - root - Custom safety settings applied.
2025-05-29 08:55:37,736 - INFO - root - Flask app created and configured.
2025-05-29 08:55:37,767 - WARNING - werkzeug -  * Debugger is active!
2025-05-29 08:55:37,770 - INFO - werkzeug -  * Debugger PIN: 673-081-219
2025-05-29 08:55:44,873 - INFO - werkzeug -  * Detected change in '/home/melek/Desktop/financial_assistant/backend/app/services/ai_service.py', reloading
2025-05-29 08:55:45,048 - INFO - werkzeug -  * Restarting with stat
2025-05-29 08:55:48,711 - INFO - root - Custom safety settings applied.
2025-05-29 08:55:48,716 - INFO - root - Flask app created and configured.
2025-05-29 08:55:48,737 - WARNING - werkzeug -  * Debugger is active!
2025-05-29 08:55:48,739 - INFO - werkzeug -  * Debugger PIN: 673-081-219
2025-05-29 08:55:54,156 - INFO - root - Received chat message from user 1: add expense of 5000 usd category food descrioption food
2025-05-29 08:55:54,157 - INFO - root - User 1 query sent to Gemini: add expense of 5000 usd category food descrioption food
2025-05-29 08:55:54,157 - INFO - root - Current datetime for user 1: {'date': '2025-05-29', 'time': '08:55', 'day_name': 'Thursday', 'timezone': 'Local'}
2025-05-29 08:55:57,066 - INFO - root - AI requested function call: add_transaction with args: {'currency': 'USD', 'description': 'food', 'type': 'expense', 'amount': 5000.0, 'category': 'Food'} for user 1
2025-05-29 08:56:00,457 - INFO - root - Function add_transaction execution result: Expense of 5000.00 USD for 'food' added successfully at 2025-05-29 08:55. for user 1
2025-05-29 08:56:00,457 - INFO - root - Sending tool responses back to AI for user 1: [{'function_response': {'name': 'add_transaction', 'response': {'result': "Expense of 5000.00 USD for 'food' added successfully at 2025-05-29 08:55."}}}]
2025-05-29 08:56:01,731 - INFO - root - Final AI response to user 1: OK. Expense of 5000.00 USD for 'food' added successfully at 2025-05-29 08:55.

2025-05-29 08:56:04,057 - INFO - root - Chat history stored for user 1
2025-05-29 08:56:04,059 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:56:04] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 08:56:05,971 - INFO - root - Received chat message from user 1: hey what is my income for teh lats 12 months in usd
2025-05-29 08:56:05,972 - INFO - root - User 1 query sent to Gemini: hey what is my income for teh lats 12 months in usd
2025-05-29 08:56:05,972 - INFO - root - Current datetime for user 1: {'date': '2025-05-29', 'time': '08:56', 'day_name': 'Thursday', 'timezone': 'Local'}
2025-05-29 08:56:07,405 - INFO - root - AI requested function call: get_current_datetime with args: {} for user 1
2025-05-29 08:56:07,406 - INFO - root - Function get_current_datetime execution result: {'date': '2025-05-29', 'time': '08:56', 'day_name': 'Thursday', 'timezone': 'Local'} for user 1
2025-05-29 08:56:07,406 - INFO - root - Sending tool responses back to AI for user 1: [{'function_response': {'name': 'get_current_datetime', 'response': {'result': {'date': '2025-05-29', 'time': '08:56', 'day_name': 'Thursday', 'timezone': 'Local'}}}}]
2025-05-29 08:56:09,622 - WARNING - root - AI final response text is empty for user 1. Tool calls attempted: 1
2025-05-29 08:56:09,622 - INFO - root - Final AI response to user 1: I attempted to execute the requested actions (get_current_datetime), but I couldn't formulate a detailed summary. Please check the relevant dashboard sections.
2025-05-29 08:56:09,976 - INFO - root - Chat history stored for user 1
2025-05-29 08:56:09,977 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:56:09] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 08:56:25,551 - INFO - root - Received chat message from user 1: what time is it now
2025-05-29 08:56:25,551 - INFO - root - User 1 query sent to Gemini: what time is it now
2025-05-29 08:56:25,551 - INFO - root - Current datetime for user 1: {'date': '2025-05-29', 'time': '08:56', 'day_name': 'Thursday', 'timezone': 'Local'}
2025-05-29 08:56:27,176 - INFO - root - Final AI response to user 1: It's 08:57 right now.

2025-05-29 08:56:29,160 - INFO - root - Chat history stored for user 1
2025-05-29 08:56:29,160 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:56:29] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 08:56:40,537 - INFO - root - Received chat message from user 1: what is my income from june 2000 to january 2026
2025-05-29 08:56:40,537 - INFO - root - User 1 query sent to Gemini: what is my income from june 2000 to january 2026
2025-05-29 08:56:40,537 - INFO - root - Current datetime for user 1: {'date': '2025-05-29', 'time': '08:56', 'day_name': 'Thursday', 'timezone': 'Local'}
2025-05-29 08:56:42,738 - INFO - root - AI requested function call: get_financial_summary with args: {'end_date': '2026-01-31', 'transaction_type': 'income', 'target_currency': 'USD', 'start_date': '2000-06-01'} for user 1
2025-05-29 08:56:42,739 - INFO - root - Calculating income from 2000-06-01 to 2026-01-31 (inclusive) for user 1
2025-05-29 08:56:42,741 - INFO - root - Total income for user 1: 5603.0 USD
2025-05-29 08:56:42,741 - INFO - root - Function get_financial_summary execution result: 5603.0 for user 1
2025-05-29 08:56:42,741 - INFO - root - Sending tool responses back to AI for user 1: [{'function_response': {'name': 'get_financial_summary', 'response': {'result': 5603.0}}}]
2025-05-29 08:56:44,548 - INFO - root - Final AI response to user 1: Your total income from June 1st, 2000 to January 31st, 2026 was 5603.00 USD.

2025-05-29 08:56:45,827 - INFO - root - Chat history stored for user 1
2025-05-29 08:56:45,828 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:56:45] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 08:56:58,589 - INFO - root - Received chat message from user 1: what is my expsne  from june 2000 to january 2026
2025-05-29 08:56:58,589 - INFO - root - User 1 query sent to Gemini: what is my expsne  from june 2000 to january 2026
2025-05-29 08:56:58,589 - INFO - root - Current datetime for user 1: {'date': '2025-05-29', 'time': '08:56', 'day_name': 'Thursday', 'timezone': 'Local'}
2025-05-29 08:57:00,565 - INFO - root - AI requested function call: get_financial_summary with args: {'end_date': '2026-01-31', 'transaction_type': 'expense', 'target_currency': 'USD', 'start_date': '2000-06-01'} for user 1
2025-05-29 08:57:00,566 - INFO - root - Calculating expense from 2000-06-01 to 2026-01-31 (inclusive) for user 1
2025-05-29 08:57:03,835 - INFO - root - Total expense for user 1: 21278.75 USD
2025-05-29 08:57:03,835 - INFO - root - Function get_financial_summary execution result: 21278.75 for user 1
2025-05-29 08:57:03,835 - INFO - root - Sending tool responses back to AI for user 1: [{'function_response': {'name': 'get_financial_summary', 'response': {'result': 21278.75}}}]
2025-05-29 08:57:05,188 - INFO - root - Final AI response to user 1: Your total expenses from June 1st, 2000 to January 31st, 2026 were 21278.75 USD.

2025-05-29 08:57:06,451 - INFO - root - Chat history stored for user 1
2025-05-29 08:57:06,452 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:57:06] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 08:57:16,273 - INFO - root - Received chat message from user 1: in detail
2025-05-29 08:57:16,273 - INFO - root - User 1 query sent to Gemini: in detail
2025-05-29 08:57:16,274 - INFO - root - Current datetime for user 1: {'date': '2025-05-29', 'time': '08:57', 'day_name': 'Thursday', 'timezone': 'Local'}
2025-05-29 08:57:18,019 - INFO - root - Final AI response to user 1: I'm sorry, I cannot provide more detail than the total amounts shown in the previous summaries.  The available tools only provide summarized information.  Is there anything else I can help you with?

2025-05-29 08:57:19,214 - INFO - root - Chat history stored for user 1
2025-05-29 08:57:19,214 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:57:19] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 08:57:59,599 - INFO - root - Calculating income from 2025-05-01 to 2025-05-29 (inclusive) for user 1
2025-05-29 08:57:59,600 - INFO - root - Total income for user 1: 5603.0 USD
2025-05-29 08:57:59,600 - INFO - root - Calculating expense from 2025-05-01 to 2025-05-29 (inclusive) for user 1
2025-05-29 08:58:02,693 - INFO - root - Total expense for user 1: 21278.75 USD
2025-05-29 08:58:02,703 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 08:58:02] "GET / HTTP/1.1" 200 -
2025-05-29 09:01:09,490 - INFO - root - Custom safety settings applied.
2025-05-29 09:01:09,493 - INFO - root - Flask app created and configured.
2025-05-29 09:01:09,540 - INFO - werkzeug - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.0.8:5000
2025-05-29 09:01:09,540 - INFO - werkzeug - [33mPress CTRL+C to quit[0m
2025-05-29 09:01:09,540 - INFO - werkzeug -  * Restarting with stat
2025-05-29 09:01:10,784 - INFO - root - Custom safety settings applied.
2025-05-29 09:01:10,790 - INFO - root - Flask app created and configured.
2025-05-29 09:01:10,830 - WARNING - werkzeug -  * Debugger is active!
2025-05-29 09:01:10,834 - INFO - werkzeug -  * Debugger PIN: 673-081-219
2025-05-29 09:01:10,862 - INFO - root - Calculating income from 2025-05-01 to 2025-05-29 (inclusive) for user 1
2025-05-29 09:01:10,866 - INFO - root - Total income for user 1: 5603.0 USD
2025-05-29 09:01:10,866 - INFO - root - Calculating expense from 2025-05-01 to 2025-05-29 (inclusive) for user 1
2025-05-29 09:01:12,086 - INFO - root - Total expense for user 1: 21278.75 USD
2025-05-29 09:01:12,283 - ERROR - root - Error loading dashboard for user 1: '>=' not supported between instances of 'str' and 'int'
Traceback (most recent call last):
  File "/home/melek/Desktop/financial_assistant/backend/app/routes/main_routes.py", line 66, in dashboard_view
    return render_template(
           ^^^^^^^^^^^^^^^^
  File "/home/melek/Desktop/financial_assistant/backend/venv/lib/python3.12/site-packages/flask/templating.py", line 150, in render_template
    return _render(app, template, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/melek/Desktop/financial_assistant/backend/venv/lib/python3.12/site-packages/flask/templating.py", line 131, in _render
    rv = template.render(context)
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/melek/Desktop/financial_assistant/backend/venv/lib/python3.12/site-packages/jinja2/environment.py", line 1295, in render
    self.environment.handle_exception()
  File "/home/melek/Desktop/financial_assistant/backend/venv/lib/python3.12/site-packages/jinja2/environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "/home/melek/Desktop/financial_assistant/backend/app/templates/dashboard.html", line 179, in top-level template code
    <div class="card balance {% if net_balance is not none and net_balance >= 0 %}positive{% elif net_balance is not none and net_balance < 0 %}negative{% endif %}">
    ^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: '>=' not supported between instances of 'str' and 'int'
2025-05-29 09:01:12,295 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 09:01:12] "[35m[1mGET / HTTP/1.1[0m" 500 -
2025-05-29 09:01:12,582 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 09:01:12] "[36mGET /?__debugger__=yes&cmd=resource&f=style.css HTTP/1.1[0m" 304 -
2025-05-29 09:01:12,682 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 09:01:12] "[36mGET /?__debugger__=yes&cmd=resource&f=debugger.js HTTP/1.1[0m" 304 -
2025-05-29 09:01:13,200 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 09:01:13] "GET /?__debugger__=yes&cmd=resource&f=console.png&s=NtkeSd1L6JOXDUC11puc HTTP/1.1" 200 -
2025-05-29 09:01:13,437 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 09:01:13] "[36mGET /?__debugger__=yes&cmd=resource&f=debugger.js HTTP/1.1[0m" 304 -
2025-05-29 09:01:13,731 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 09:01:13] "[36mGET /?__debugger__=yes&cmd=resource&f=console.png HTTP/1.1[0m" 304 -
2025-05-29 09:01:14,608 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 09:01:14] "[36mGET /?__debugger__=yes&cmd=resource&f=console.png HTTP/1.1[0m" 304 -
2025-05-29 09:04:08,640 - INFO - root - Custom safety settings applied.
2025-05-29 09:04:08,643 - INFO - root - Flask app created and configured.
2025-05-29 09:04:32,503 - INFO - root - Custom safety settings applied.
2025-05-29 09:04:33,010 - INFO - root - Flask app created and configured.
2025-05-29 09:04:43,764 - INFO - root - Custom safety settings applied.
2025-05-29 09:04:43,767 - INFO - root - Flask app created and configured.
2025-05-29 09:05:35,233 - INFO - root - Custom safety settings applied.
2025-05-29 09:05:35,236 - INFO - root - Flask app created and configured.
2025-05-29 09:05:35,290 - INFO - werkzeug - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.0.8:5000
2025-05-29 09:05:35,290 - INFO - werkzeug - [33mPress CTRL+C to quit[0m
2025-05-29 09:05:35,291 - INFO - werkzeug -  * Restarting with stat
2025-05-29 09:05:36,058 - INFO - root - Custom safety settings applied.
2025-05-29 09:05:36,063 - INFO - root - Flask app created and configured.
2025-05-29 09:05:36,087 - WARNING - werkzeug -  * Debugger is active!
2025-05-29 09:05:36,088 - INFO - werkzeug -  * Debugger PIN: 673-081-219
2025-05-29 09:05:37,949 - INFO - root - Calculating income from 2025-05-01 to 2025-05-29 (inclusive) for user 1
2025-05-29 09:05:37,951 - INFO - root - Total income for user 1: 5603.0 USD
2025-05-29 09:05:37,952 - INFO - root - Calculating expense from 2025-05-01 to 2025-05-29 (inclusive) for user 1
2025-05-29 09:05:39,178 - INFO - root - Total expense for user 1: 21278.75 USD
2025-05-29 09:05:39,188 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 09:05:39] "GET / HTTP/1.1" 200 -
2025-05-29 09:05:39,231 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 09:05:39] "[33mGET /static/styles.css HTTP/1.1[0m" 404 -
2025-05-29 09:05:42,584 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 09:05:42] "GET /chat-page HTTP/1.1" 200 -
2025-05-29 09:05:42,909 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 09:05:42] "[33mGET /static/styles.css HTTP/1.1[0m" 404 -
2025-05-29 09:05:43,253 - INFO - root - Retrieved 47 chat history entries for user 1
2025-05-29 09:05:43,255 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 09:05:43] "GET /api/chat-history HTTP/1.1" 200 -
2025-05-29 09:06:02,189 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 09:06:02] "GET /chat-page HTTP/1.1" 200 -
2025-05-29 09:06:02,228 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 09:06:02] "[33mGET /styles.css HTTP/1.1[0m" 404 -
2025-05-29 09:06:02,524 - INFO - root - Retrieved 47 chat history entries for user 1
2025-05-29 09:06:02,525 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 09:06:02] "GET /api/chat-history HTTP/1.1" 200 -
2025-05-29 09:07:23,283 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 09:07:23] "GET /chat-page HTTP/1.1" 200 -
2025-05-29 09:07:23,629 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 09:07:23] "[33mGET /static/styles.css HTTP/1.1[0m" 404 -
2025-05-29 09:07:24,319 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 09:07:24] "GET /chat-page HTTP/1.1" 200 -
2025-05-29 09:07:24,353 - INFO - root - Retrieved 47 chat history entries for user 1
2025-05-29 09:07:24,357 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 09:07:24] "GET /api/chat-history HTTP/1.1" 200 -
2025-05-29 09:07:24,708 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 09:07:24] "[33mGET /static/styles.css HTTP/1.1[0m" 404 -
2025-05-29 09:07:25,216 - INFO - root - Retrieved 47 chat history entries for user 1
2025-05-29 09:07:25,370 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 09:07:25] "GET /api/chat-history HTTP/1.1" 200 -
2025-05-29 09:07:31,799 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 09:07:31] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-05-29 09:07:32,690 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 09:07:32] "[33mGET /static/styles.css HTTP/1.1[0m" 404 -
2025-05-29 09:08:03,359 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 09:08:03] "GET /chat-page HTTP/1.1" 200 -
2025-05-29 09:08:03,518 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 09:08:03] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-05-29 09:08:03,562 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 09:08:03] "[33mGET /static/styles.css HTTP/1.1[0m" 404 -
2025-05-29 09:08:04,277 - INFO - root - Retrieved 47 chat history entries for user 1
2025-05-29 09:08:04,278 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 09:08:04] "GET /api/chat-history HTTP/1.1" 200 -
2025-05-29 09:09:25,583 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 09:09:25] "GET /chat-page HTTP/1.1" 200 -
2025-05-29 09:09:25,715 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 09:09:25] "[33mGET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1[0m" 404 -
2025-05-29 09:09:25,791 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 09:09:25] "GET /static/styles.css HTTP/1.1" 200 -
2025-05-29 09:09:26,956 - INFO - root - Retrieved 47 chat history entries for user 1
2025-05-29 09:09:26,958 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 09:09:26] "GET /api/chat-history HTTP/1.1" 200 -
2025-05-29 09:09:33,236 - INFO - root - Calculating income from 2025-05-01 to 2025-05-29 (inclusive) for user 1
2025-05-29 09:09:33,239 - INFO - root - Total income for user 1: 5603.0 USD
2025-05-29 09:09:33,239 - INFO - root - Calculating expense from 2025-05-01 to 2025-05-29 (inclusive) for user 1
2025-05-29 09:09:34,626 - INFO - root - Total expense for user 1: 21278.75 USD
2025-05-29 09:09:34,637 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 09:09:34] "GET / HTTP/1.1" 200 -
2025-05-29 09:09:34,727 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 09:09:34] "[36mGET /static/styles.css HTTP/1.1[0m" 304 -
2025-05-29 09:09:48,514 - INFO - root - Starting PDF generation for user 1 with filename: financial_report_demouser_20250529090948.pdf
2025-05-29 09:09:48,517 - INFO - root - Fetching financial data for period 2025-05-01 to 2025-05-29
2025-05-29 09:09:48,517 - INFO - root - Calculating income from 2025-05-01 to 2025-05-29 (inclusive) for user 1
2025-05-29 09:09:48,518 - INFO - root - Total income for user 1: 5603.0 USD
2025-05-29 09:09:48,518 - INFO - root - Calculating expense from 2025-05-01 to 2025-05-29 (inclusive) for user 1
2025-05-29 09:09:49,861 - INFO - root - Total expense for user 1: 21278.75 USD
2025-05-29 09:09:49,862 - INFO - root - Found 10 recent transactions for user 1
2025-05-29 09:09:49,865 - INFO - root - Successfully generated PDF report: financial_report_demouser_20250529090948.pdf for user 1
2025-05-29 09:09:49,865 - INFO - root - PDF report generated and download URL created for user 1: http://127.0.0.1:5000/api/reports/pdf/financial_report_demouser_20250529090948.pdf
2025-05-29 09:09:49,865 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 09:09:49] "GET /api/request-pdf-report HTTP/1.1" 200 -
2025-05-29 09:09:55,813 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 09:09:55] "GET /chat-page HTTP/1.1" 200 -
2025-05-29 09:09:55,858 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 09:09:55] "[36mGET /static/styles.css HTTP/1.1[0m" 304 -
2025-05-29 09:09:56,067 - INFO - root - Retrieved 47 chat history entries for user 1
2025-05-29 09:09:56,069 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 09:09:56] "GET /api/chat-history HTTP/1.1" 200 -
2025-05-29 09:11:15,444 - INFO - root - Received chat message from user 1: hey
2025-05-29 09:11:15,445 - INFO - root - User 1 query sent to Gemini: hey
2025-05-29 09:11:15,445 - INFO - root - Current datetime for user 1: {'date': '2025-05-29', 'time': '09:11', 'day_name': 'Thursday', 'timezone': 'Local'}
2025-05-29 09:11:17,545 - INFO - root - Final AI response to user 1: Hey there! What's up?

2025-05-29 09:11:18,344 - INFO - root - Chat history stored for user 1
2025-05-29 09:11:18,345 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 09:11:18] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 09:11:24,747 - INFO - root - Received chat message from user 1: what is my income this month
2025-05-29 09:11:24,747 - INFO - root - User 1 query sent to Gemini: what is my income this month
2025-05-29 09:11:24,747 - INFO - root - Current datetime for user 1: {'date': '2025-05-29', 'time': '09:11', 'day_name': 'Thursday', 'timezone': 'Local'}
2025-05-29 09:11:25,877 - INFO - root - AI requested function call: get_current_datetime with args: {} for user 1
2025-05-29 09:11:26,048 - INFO - root - Function get_current_datetime execution result: {'date': '2025-05-29', 'time': '09:11', 'day_name': 'Thursday', 'timezone': 'Local'} for user 1
2025-05-29 09:11:26,048 - INFO - root - Sending tool responses back to AI for user 1: [{'function_response': {'name': 'get_current_datetime', 'response': {'result': {'date': '2025-05-29', 'time': '09:11', 'day_name': 'Thursday', 'timezone': 'Local'}}}}]
2025-05-29 09:11:27,745 - INFO - root - Final AI response to user 1: To calculate your income for this month, I need to know the exact dates.  This month is May 2025, so I'll calculate your income from 2025-05-01 to 2025-05-29.

```tool_code
print(default_api.get_financial_summary(transaction_type='income', start_date='2025-05-01', end_date='2025-05-29', target_currency='USD'))
```
2025-05-29 09:11:28,473 - INFO - root - Chat history stored for user 1
2025-05-29 09:11:28,473 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 09:11:28] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 09:11:40,806 - INFO - root - Received chat message from user 1: what is my expsne from june 2000 to january 2026
2025-05-29 09:11:40,806 - INFO - root - User 1 query sent to Gemini: what is my expsne from june 2000 to january 2026
2025-05-29 09:11:40,806 - INFO - root - Current datetime for user 1: {'date': '2025-05-29', 'time': '09:11', 'day_name': 'Thursday', 'timezone': 'Local'}
2025-05-29 09:11:42,146 - INFO - root - AI requested function call: get_financial_summary with args: {'end_date': '2026-01-31', 'transaction_type': 'expense', 'start_date': '2000-06-01'} for user 1
2025-05-29 09:11:42,146 - INFO - root - Calculating expense from 2000-06-01 to 2026-01-31 (inclusive) for user 1
2025-05-29 09:11:43,337 - INFO - root - Total expense for user 1: 21278.75 USD
2025-05-29 09:11:43,337 - INFO - root - Function get_financial_summary execution result: 21278.75 for user 1
2025-05-29 09:11:43,337 - INFO - root - Sending tool responses back to AI for user 1: [{'function_response': {'name': 'get_financial_summary', 'response': {'result': 21278.75}}}]
2025-05-29 09:11:44,653 - INFO - root - Final AI response to user 1: For the period from 2000-06-01 to 2026-01-31, your total expenses were $21278.75 USD.

2025-05-29 09:11:45,789 - INFO - root - Chat history stored for user 1
2025-05-29 09:11:45,789 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 09:11:45] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 09:12:00,401 - INFO - root - Received chat message from user 1: what is my income from june 2000 to january 2026
2025-05-29 09:12:00,401 - INFO - root - User 1 query sent to Gemini: what is my income from june 2000 to january 2026
2025-05-29 09:12:00,401 - INFO - root - Current datetime for user 1: {'date': '2025-05-29', 'time': '09:12', 'day_name': 'Thursday', 'timezone': 'Local'}
2025-05-29 09:12:02,488 - INFO - root - AI requested function call: get_financial_summary with args: {'end_date': '2026-01-31', 'transaction_type': 'income', 'target_currency': 'USD', 'start_date': '2000-06-01'} for user 1
2025-05-29 09:12:02,489 - INFO - root - Calculating income from 2000-06-01 to 2026-01-31 (inclusive) for user 1
2025-05-29 09:12:02,489 - INFO - root - Total income for user 1: 5603.0 USD
2025-05-29 09:12:02,489 - INFO - root - Function get_financial_summary execution result: 5603.0 for user 1
2025-05-29 09:12:02,490 - INFO - root - Sending tool responses back to AI for user 1: [{'function_response': {'name': 'get_financial_summary', 'response': {'result': 5603.0}}}]
2025-05-29 09:12:03,647 - INFO - root - Final AI response to user 1: Your total income from June 1st, 2000 to January 31st, 2026 was $5603.00 USD.

2025-05-29 09:12:05,887 - INFO - root - Chat history stored for user 1
2025-05-29 09:12:05,887 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 09:12:05] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 09:13:19,426 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 09:13:19] "GET /chat-page HTTP/1.1" 200 -
2025-05-29 09:13:19,589 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 09:13:19] "GET /static/styles.css HTTP/1.1" 200 -
2025-05-29 09:13:19,902 - INFO - root - Retrieved 50 chat history entries for user 1
2025-05-29 09:13:19,904 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 09:13:19] "GET /api/chat-history HTTP/1.1" 200 -
2025-05-29 09:13:30,441 - INFO - root - Received chat message from user 1: hey how are you
2025-05-29 09:13:30,442 - INFO - root - User 1 query sent to Gemini: hey how are you
2025-05-29 09:13:30,442 - INFO - root - Current datetime for user 1: {'date': '2025-05-29', 'time': '09:13', 'day_name': 'Thursday', 'timezone': 'Local'}
2025-05-29 09:13:31,763 - INFO - root - Final AI response to user 1: I'm doing great, thanks for asking!  How can I help you with your finances today?

2025-05-29 09:13:33,299 - INFO - root - Chat history stored for user 1
2025-05-29 09:13:33,300 - INFO - werkzeug - 127.0.0.1 - - [29/May/2025 09:13:33] "POST /api/chat HTTP/1.1" 200 -
2025-05-29 09:18:28,718 - INFO - root - Custom safety settings applied.
2025-05-29 09:18:28,728 - INFO - root - Flask app created and configured.
2025-05-29 09:18:28,935 - INFO - root - Calculating income from 2025-05-01 to 2025-05-29 (inclusive) for user 1
2025-05-29 09:18:28,940 - INFO - root - Total income for user 1: 5603.0 USD
2025-05-29 09:18:28,941 - INFO - root - Calculating expense from 2025-05-01 to 2025-05-29 (inclusive) for user 1
2025-05-29 09:18:30,524 - INFO - root - Total expense for user 1: 21278.75 USD
2025-05-29 09:18:30,579 - INFO - root - Calculating income from 2025-05-01 to 2025-05-29 (inclusive) for user 1
2025-05-29 09:18:30,588 - INFO - root - Total income for user 1: 5603.0 USD
2025-05-29 09:18:30,588 - INFO - root - Calculating expense from 2025-05-01 to 2025-05-29 (inclusive) for user 1
2025-05-29 09:18:33,408 - INFO - root - Total expense for user 1: 21278.75 USD
